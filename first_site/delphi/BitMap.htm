<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>&#1055;&#1086;&#1089;&#1090;&#1072;&#1074;&#1080;&#1090;&#1100;
&#1090;&#1086;&#1095;&#1082;&#1091;</title>
<meta name="Microsoft Theme" content="zero 011">
</head>

<body background="zertxtr.gif" bgcolor="#000000" text="#FFFFFF" link="#6699CC" vlink="#669966" alink="#999999">

<!--mstheme--><font face="Arial, Arial, Helvetica"><!--mstheme--></font>
<h3 align="center"><!--mstheme--><font face="Arial, Arial, Helvetica" color="#CCCCCC"><font color="#00FF00" size="5">&#1055;&#1086;&#1089;&#1090;&#1072;&#1074;&#1080;&#1090;&#1100;
&#1090;&#1086;&#1095;&#1082;&#1091;...
&#1041;&#1099;&#1089;&#1090;&#1088;&#1099;&#1081;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;&#1084; TBitmap</font><!--mstheme--></font></h3>
<!--mstheme--><font face="Arial, Arial, Helvetica"><!--// BODY -->
<p align="right"><small><a href="http://www.delphimaster.ru/articles/pixels/qpix.zip">&#1040;&#1088;&#1093;&#1080;&#1074;
&#1089; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1099;&#1084;&#1080;
&#1090;&#1077;&#1082;&#1089;&#1090;&#1072;&#1084;&#1080; &#1076;&#1083;&#1103;
&#1089;&#1090;&#1072;&#1090;&#1100;&#1080;</a></small></p>
<p align="justify">&nbsp;&nbsp;<b>&#1055;</b>&#1088;&#1080;
&#1088;&#1072;&#1073;&#1086;&#1090;&#1077; &#1089;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1086;&#1074;&#1086;&#1081;
&#1075;&#1088;&#1072;&#1092;&#1080;&#1082;&#1086;&#1081;
&#1086;&#1095;&#1077;&#1085;&#1100; &#1095;&#1072;&#1089;&#1090;&#1086;
&#1074;&#1086;&#1079;&#1085;&#1080;&#1082;&#1072;&#1077;&#1090;
&#1079;&#1072;&#1076;&#1072;&#1095;&#1072;
&#1087;&#1086;&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1100;&#1085;&#1086;&#1075;&#1086;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; &#1082; Bitmap.
&#1059;&#1076;&#1086;&#1073;&#1085;&#1086; &#1080;
&#1086;&#1095;&#1077;&#1085;&#1100; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086;
&#1087;&#1088;&#1080; &#1101;&#1090;&#1086;&#1084;
&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;&#1089;&#1103;
&#1089;&#1074;&#1086;&#1081;&#1089;&#1090;&#1074;&#1086;&#1084; Canvas.Pixels,
&#1085;&#1086; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090;
&#1090;&#1072;&#1082;&#1086;&#1081; &#1084;&#1077;&#1090;&#1086;&#1076;
&#1086;&#1095;&#1077;&#1085;&#1100;
&#1084;&#1077;&#1076;&#1083;&#1077;&#1085;&#1085;&#1086; -
&#1087;&#1088;&#1086;&#1095;&#1080;&#1090;&#1072;&#1090;&#1100;,
&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100;
&#1080;&#1083;&#1080; &#1087;&#1086;&#1084;&#1077;&#1085;&#1103;&#1090;&#1100;
&#1094;&#1074;&#1077;&#1090;&#1072;
&#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1080;&#1093;
&#1090;&#1086;&#1095;&#1077;&#1082; &#1080;&#1083;&#1080; &#1085;&#1077;
&#1089;&#1083;&#1080;&#1096;&#1082;&#1086;&#1084;
&#1073;&#1086;&#1083;&#1100;&#1096;&#1086;&#1081;
&#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080;
&#1084;&#1086;&#1078;&#1085;&#1086;, &#1085;&#1086; &#1074;&#1086;&#1090;
&#1087;&#1088;&#1086;&#1074;&#1086;&#1076;&#1080;&#1090;&#1100;
&#1082;&#1072;&#1082;&#1091;&#1102;-&#1083;&#1080;&#1073;&#1086;
&#1094;&#1080;&#1092;&#1088;&#1086;&#1074;&#1091;&#1102;
&#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1091; -
&#1079;&#1072;&#1090;&#1088;&#1091;&#1076;&#1085;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;.
&#1044;&#1083;&#1103; &#1073;&#1099;&#1089;&#1090;&#1088;&#1086;&#1075;&#1086;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; &#1082;
&#1076;&#1072;&#1085;&#1085;&#1099;&#1084; &#1091;
&#1082;&#1083;&#1072;&#1089;&#1089;&#1072; TBitmap
&#1080;&#1084;&#1077;&#1077;&#1090;&#1089;&#1103;
&#1089;&#1074;&#1086;&#1081;&#1089;&#1090;&#1074;&#1086; ScanLine -
&#1089;&#1082;&#1086;&#1088;&#1086;&#1089;&#1090;&#1100; &#1087;&#1088;&#1080;
&#1101;&#1090;&#1086;&#1084;
&#1074;&#1099;&#1088;&#1072;&#1089;&#1090;&#1072;&#1077;&#1090; &#1085;&#1072;
&#1087;&#1086;&#1088;&#1103;&#1076;&#1086;&#1082;, &#1085;&#1086;
&#1074;&#1086;&#1079;&#1085;&#1080;&#1082;&#1072;&#1102;&#1090; &#1080;
&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1077;
&#1087;&#1088;&#1086;&#1073;&#1083;&#1077;&#1084;&#1099; -
&#1086;&#1073;&#1088;&#1072;&#1097;&#1077;&#1085;&#1080;&#1077; &#1082;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;&#1084;
&#1073;&#1091;&#1076;&#1077;&#1090;
&#1074;&#1099;&#1075;&#1083;&#1103;&#1076;&#1077;&#1090;&#1100;
&#1089;&#1086;&#1074;&#1077;&#1088;&#1096;&#1077;&#1085;&#1085;&#1086;
&#1087;&#1086;-&#1088;&#1072;&#1079;&#1085;&#1086;&#1084;&#1091; &#1074;
&#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;
&#1086;&#1090; &#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1072;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072; (&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1081;
&#1075;&#1083;&#1091;&#1073;&#1080;&#1085;&#1099; - 8, 16, 24
&#1073;&#1080;&#1090;/&#1087;&#1080;&#1082;&#1089;&#1077;&#1083; &#1080; &#1090;.&#1076;.),
&#1090;.&#1077;. &#1089;&#1090;&#1088;&#1072;&#1076;&#1072;&#1077;&#1090;
&#1091;&#1085;&#1080;&#1074;&#1077;&#1088;&#1089;&#1072;&#1083;&#1100;&#1085;&#1086;&#1089;&#1090;&#1100;
&#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1072;&#1090;&#1099;&#1074;&#1072;&#1077;&#1084;&#1099;&#1093;
&#1087;&#1088;&#1086;&#1094;&#1077;&#1076;&#1091;&#1088;.
<p align="justify">&nbsp;&nbsp;<b>&#1055;</b>&#1088;&#1080;&#1095;&#1080;&#1085;&#1099;
&#1085;&#1080;&#1079;&#1082;&#1086;&#1081;
&#1089;&#1082;&#1086;&#1088;&#1086;&#1089;&#1090;&#1080;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; &#1082; Pixels
&#1074;&#1082;&#1088;&#1072;&#1090;&#1094;&#1077;
&#1090;&#1072;&#1082;&#1086;&#1074;&#1099;: &#1087;&#1088;&#1080;
&#1082;&#1072;&#1078;&#1076;&#1086;&#1084; &#1090;&#1072;&#1082;&#1086;&#1084;
&#1086;&#1073;&#1088;&#1072;&#1097;&#1077;&#1085;&#1080;&#1080;
&#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1102;&#1090;&#1089;&#1103;
&#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1080; API SetPixel
&#1080;&#1083;&#1080; GetPixel,
&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077;
&#1076;&#1086;&#1083;&#1078;&#1085;&#1099;
&#1079;&#1072;&#1073;&#1083;&#1086;&#1082;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;
&#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1077;&#1084;&#1099;&#1081;
&#1082;&#1086;&#1085;&#1090;&#1077;&#1082;&#1089;&#1090;
&#1091;&#1089;&#1090;&#1088;&#1086;&#1081;&#1089;&#1090;&#1074;&#1072; (&#1076;&#1072;&#1083;&#1077;&#1077;
DC - Device Context),
&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1080;&#1090;&#1100;
&#1090;&#1077;&#1082;&#1091;&#1097;&#1077;&#1077;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;
&#1082;&#1086;&#1086;&#1088;&#1076;&#1080;&#1085;&#1072;&#1090;, &#1089;
&#1077;&#1075;&#1086; &#1091;&#1095;&#1077;&#1090;&#1086;&#1084;
&#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1080;&#1090;&#1100;,
&#1087;&#1086;&#1087;&#1072;&#1076;&#1072;&#1077;&#1090; &#1083;&#1080;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083; &#1074;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1081;
&#1088;&#1077;&#1075;&#1080;&#1086;&#1085; DC,
&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100;
&#1080;&#1083;&#1080;
&#1087;&#1088;&#1086;&#1095;&#1080;&#1090;&#1072;&#1090;&#1100;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077;
&#1094;&#1074;&#1077;&#1090;&#1072;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072; &#1089;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084;
&#1082; &#1085;&#1091;&#1078;&#1085;&#1086;&#1084;&#1091;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1084;&#1091;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1091;, &#1095;&#1090;&#1086;
&#1086;&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103;
c &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &quot;&#1073;&#1083;&#1080;&#1090;&#1090;&#1080;&#1085;&#1075;&#1072;&quot;
- &#1082;&#1086;&#1087;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;
&#1087;&#1088;&#1103;&#1084;&#1086;&#1091;&#1075;&#1086;&#1083;&#1100;&#1085;&#1086;&#1075;&#1086;
&#1091;&#1095;&#1072;&#1089;&#1090;&#1082;&#1072; DC,
&#1087;&#1086;&#1089;&#1083;&#1077; &#1095;&#1077;&#1075;&#1086;
&#1088;&#1072;&#1079;&#1073;&#1083;&#1086;&#1082;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;
DC. &#1042;&#1089;&#1077; &#1101;&#1090;&#1086;
&#1090;&#1088;&#1077;&#1073;&#1091;&#1077;&#1090;
&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1093;
&#1079;&#1072;&#1090;&#1088;&#1072;&#1090;
&#1087;&#1088;&#1086;&#1094;&#1077;&#1089;&#1089;&#1086;&#1088;&#1085;&#1086;&#1075;&#1086;
&#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1080; (&#1074; &#1090;&#1086;&#1084;
&#1095;&#1080;&#1089;&#1083;&#1077; &#1080; &#1085;&#1072;
&#1087;&#1077;&#1088;&#1077;&#1093;&#1086;&#1076; &#1074;
&#1088;&#1077;&#1078;&#1080;&#1084; &#1103;&#1076;&#1088;&#1072; &#1080;
&#1085;&#1072;&#1079;&#1072;&#1076;). &#1055;&#1088;&#1080;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1080;
&#1075;&#1088;&#1072;&#1092;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093;
&#1087;&#1088;&#1080;&#1084;&#1080;&#1090;&#1080;&#1074;&#1086;&#1074; GDI,
&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;,
&#1083;&#1080;&#1085;&#1080;&#1081;,
&#1087;&#1088;&#1103;&#1084;&#1086;&#1091;&#1075;&#1086;&#1083;&#1100;&#1085;&#1080;&#1082;&#1086;&#1074;
&#1080; &#1082;&#1088;&#1080;&#1074;&#1099;&#1093;,
&#1085;&#1072;&#1082;&#1083;&#1072;&#1076;&#1085;&#1099;&#1077;
&#1088;&#1072;&#1089;&#1093;&#1086;&#1076;&#1099; &#1085;&#1077;
&#1090;&#1072;&#1082;
&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;,
&#1087;&#1086;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1091;
&#1074;&#1099;&#1096;&#1077;&#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1099;&#1077;
&#1086;&#1087;&#1077;&#1088;&#1072;&#1094;&#1080;&#1080;
&#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1103;&#1102;&#1090;&#1089;&#1103;
&#1083;&#1080;&#1096;&#1100;
&#1077;&#1076;&#1080;&#1085;&#1086;&#1078;&#1076;&#1099; &#1076;&#1083;&#1103;
&#1094;&#1077;&#1083;&#1086;&#1081; &#1075;&#1088;&#1091;&#1087;&#1087;&#1099;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1086;&#1074;.
&#1052;&#1086;&#1078;&#1085;&#1086;,
&#1082;&#1086;&#1085;&#1077;&#1095;&#1085;&#1086;,
&#1076;&#1077;&#1088;&#1078;&#1072;&#1090;&#1100;
&#1082;&#1086;&#1087;&#1080;&#1102; &#1076;&#1072;&#1085;&#1085;&#1099;&#1093;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072; &#1074; DIB &#1080;&#1083;&#1080;
DIB-&#1089;&#1077;&#1082;&#1094;&#1080;&#1080;, &#1082;&#1072;&#1082;
&#1095;&#1072;&#1089;&#1090;&#1086; &#1080;
&#1076;&#1077;&#1083;&#1072;&#1077;&#1090;&#1089;&#1103;, &#1085;&#1086;
&#1091;&#1076;&#1086;&#1073;&#1085;&#1077;&#1077;
&#1089;&#1086;&#1079;&#1076;&#1072;&#1090;&#1100;
&#1073;&#1086;&#1083;&#1077;&#1077; &#1080;&#1083;&#1080;
&#1084;&#1077;&#1085;&#1077;&#1077;
&#1091;&#1085;&#1080;&#1074;&#1077;&#1088;&#1089;&#1072;&#1083;&#1100;&#1085;&#1099;&#1081;
&#1084;&#1077;&#1093;&#1072;&#1085;&#1080;&#1079;&#1084;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; &#1082;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;&#1084; TBitmap.
&#1044;&#1083;&#1103; &#1101;&#1090;&#1086;&#1075;&#1086; &#1085;&#1072;&#1084;
&#1085;&#1091;&#1078;&#1085;&#1086; &#1079;&#1085;&#1072;&#1090;&#1100;,
&#1082;&#1072;&#1082; &#1078;&#1077;
&#1091;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085; Bitmap, &#1080;
&#1082;&#1072;&#1082; &#1093;&#1088;&#1072;&#1085;&#1103;&#1090;&#1089;&#1103;
&#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1074;
&#1088;&#1072;&#1079;&#1083;&#1080;&#1095;&#1085;&#1099;&#1093;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1099;&#1093;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1072;&#1093;.
&#1050;&#1083;&#1072;&#1089;&#1089; TBitmap
&#1080;&#1085;&#1082;&#1072;&#1087;&#1089;&#1091;&#1083;&#1080;&#1088;&#1091;&#1077;&#1090;
&#1074; &#1089;&#1077;&#1073;&#1077;
&#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1099; Windows - DDB
(Device-Dependent Bitmap) &#1080;&#1083;&#1080; DIB-&#1089;&#1077;&#1082;&#1094;&#1080;&#1080;.
&#1042;&#1086; &#1074;&#1090;&#1086;&#1088;&#1086;&#1084;
&#1089;&#1083;&#1091;&#1095;&#1072;&#1077; (&#1072;
&#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1099; TBitmap
&#1087;&#1088;&#1072;&#1082;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;
&#1074;&#1089;&#1077;&#1075;&#1076;&#1072; &#1080;&#1084;&#1077;&#1102;&#1090;
HandleType=bmDib, &#1077;&#1089;&#1083;&#1080; &#1085;&#1077;
&#1079;&#1072;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; bmDDB
&#1089;&#1072;&#1084;&#1086;&#1089;&#1090;&#1086;&#1103;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;
&#1080;&#1083;&#1080; &#1085;&#1077;
&#1087;&#1088;&#1080;&#1089;&#1074;&#1072;&#1080;&#1074;&#1072;&#1090;&#1100;
TBitmap.Handle
&#1076;&#1077;&#1089;&#1082;&#1088;&#1080;&#1087;&#1090;&#1086;&#1088; DDB)
&#1084;&#1086;&#1078;&#1085;&#1086;
&#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100;
&#1087;&#1088;&#1103;&#1084;&#1086;&#1081;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082;
&#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1086;&#1085;&#1085;&#1086;&#1084;&#1091;
&#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1091; - TBitmapInfo,
&#1093;&#1088;&#1072;&#1085;&#1103;&#1097;&#1077;&#1084;&#1091; &#1074;
&#1089;&#1077;&#1073;&#1077; &#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1086;
&#1088;&#1072;&#1079;&#1084;&#1077;&#1088;&#1072;&#1093;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072;,
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1084;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1077;,
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1077; (&#1076;&#1083;&#1103;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1086;&#1074; &#1089; 1-8
&#1073;&#1080;&#1090;/&#1087;&#1080;&#1082;&#1089;&#1077;&#1083; (BPP - Bits Per
Pixel)), &#1072; &#1075;&#1083;&#1072;&#1074;&#1085;&#1086;&#1077; - &#1082;
&#1091;&#1095;&#1072;&#1089;&#1090;&#1082;&#1091;
&#1087;&#1072;&#1084;&#1103;&#1090;&#1080;,
&#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1072;&#1097;&#1077;&#1084;&#1091;
&#1085;&#1077;&#1087;&#1086;&#1089;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1099;&#1077;
&#1076;&#1072;&#1085;&#1085;&#1099;&#1077; (&#1076;&#1083;&#1103;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1086;&#1074; &#1089;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1086;&#1081; -
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1099;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074; &#1074;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1077;).
<p align="justify">&nbsp;<span style="background-color: #000000"><font color="#FFFFFF">&nbsp;&#1044;</font></span>&#1083;&#1103;
&#1086;&#1073;&#1077;&#1089;&#1087;&#1077;&#1095;&#1077;&#1085;&#1080;&#1103;
&#1087;&#1088;&#1080;&#1077;&#1084;&#1083;&#1077;&#1084;&#1086;&#1081;
&#1089;&#1082;&#1086;&#1088;&#1086;&#1089;&#1090;&#1080; &#1080;
&#1086;&#1076;&#1085;&#1086;&#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1086;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;&#1090;&#1099;
&#1086;&#1073;&#1088;&#1072;&#1097;&#1077;&#1085;&#1080;&#1103; &#1080;
&#1089;&#1086;&#1079;&#1076;&#1072;&#1085;
&#1086;&#1087;&#1080;&#1089;&#1072;&#1085;&#1085;&#1099;&#1081; &#1074;
&#1089;&#1090;&#1072;&#1090;&#1100;&#1077; &#1082;&#1083;&#1072;&#1089;&#1089;
TQuickPixels. &#1042;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;, &#1074;
&#1089;&#1083;&#1086;&#1078;&#1085;&#1099;&#1093;
&#1089;&#1083;&#1091;&#1095;&#1072;&#1103;&#1093; &#1076;&#1083;&#1103;
&#1086;&#1073;&#1077;&#1089;&#1087;&#1077;&#1095;&#1077;&#1085;&#1080;&#1103;
&#1084;&#1072;&#1082;&#1089;&#1080;&#1084;&#1072;&#1083;&#1100;&#1085;&#1086;&#1075;&#1086;
&#1073;&#1099;&#1089;&#1090;&#1088;&#1086;&#1076;&#1077;&#1081;&#1089;&#1090;&#1074;&#1080;&#1103;
&#1083;&#1091;&#1095;&#1096;&#1077; &#1073;&#1091;&#1076;&#1077;&#1090;
&#1074;&#1086;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;&#1089;&#1103;
&#1082;&#1072;&#1082;&#1086;&#1081;-&#1083;&#1080;&#1073;&#1086;
&#1087;&#1088;&#1086;&#1092;&#1077;&#1089;&#1089;&#1080;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1086;&#1081;
&#1075;&#1088;&#1072;&#1092;&#1080;&#1095;&#1077;&#1089;&#1082;&#1086;&#1081;
&#1073;&#1080;&#1073;&#1083;&#1080;&#1086;&#1090;&#1077;&#1082;&#1086;&#1081;.<!--mstheme--></font>
<h4><!--mstheme--><font face="Arial, Arial, Helvetica" color="#CCCCCC">&#1050;&#1083;&#1072;&#1089;&#1089;
TQuickPixels<!--mstheme--></font></h4>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p>&#1055;&#1086;&#1076;&#1088;&#1086;&#1073;&#1085;&#1086;
&#1088;&#1072;&#1089;&#1089;&#1084;&#1086;&#1090;&#1088;&#1080;&#1084;
&#1082;&#1083;&#1102;&#1095;&#1077;&#1074;&#1099;&#1077;
&#1084;&#1077;&#1090;&#1086;&#1076;&#1099;
&#1082;&#1083;&#1072;&#1089;&#1089;&#1072; &#1080;
&#1087;&#1088;&#1080;&#1085;&#1094;&#1080;&#1087; &#1080;&#1093;
&#1088;&#1072;&#1073;&#1086;&#1090;&#1099;.
<p align="justify">&#1052;&#1077;&#1090;&#1086;&#1076; Attach
&#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1103;&#1077;&#1090;
&#1087;&#1088;&#1080;&#1089;&#1086;&#1077;&#1076;&#1080;&#1085;&#1080;&#1090;&#1100;&#1089;&#1103;
&#1082; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1091; TBitmap &#1080;
&#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100;
&#1074;&#1085;&#1091;&#1090;&#1088;&#1077;&#1085;&#1085;&#1080;&#1077;
&#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1099;,
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1084;&#1099;&#1077;
&#1076;&#1083;&#1103; &#1088;&#1072;&#1073;&#1086;&#1090;&#1099; &#1089;
&#1085;&#1080;&#1084;.
&#1055;&#1086;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1091;
&#1089;&#1074;&#1086;&#1081;&#1089;&#1090;&#1074;&#1086; PixelFormat
&#1085;&#1077; &#1074;&#1087;&#1086;&#1083;&#1085;&#1077;
&#1086;&#1076;&#1085;&#1086;&#1079;&#1085;&#1072;&#1095;&#1085;&#1086;
&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1103;&#1077;&#1090;
&#1082;&#1086;&#1085;&#1082;&#1088;&#1077;&#1090;&#1085;&#1099;&#1081;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1081;
&#1088;&#1077;&#1078;&#1080;&#1084;,
&#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103;
&#1079;&#1072;&#1074;&#1077;&#1089;&#1090;&#1080; &#1087;&#1086;&#1083;&#1077;
BPP,
&#1093;&#1072;&#1088;&#1072;&#1082;&#1090;&#1077;&#1088;&#1080;&#1079;&#1091;&#1102;&#1097;&#1077;&#1077;
&#1084;&#1077;&#1090;&#1086;&#1076;
&#1093;&#1088;&#1072;&#1085;&#1077;&#1085;&#1080;&#1103;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1099;&#1093;
&#1076;&#1072;&#1085;&#1085;&#1099;&#1093;:<!--mstheme--></font>
<pre>var
  DS: TDibSection;

 case FBitmap.PixelFormat of
    ...
    pf4bit: SetBPP(4);
// &#1076;&#1083;&#1103; &#1087;&#1086;&#1076;&#1086;&#1073;&#1085;&#1099;&#1093; &#1088;&#1077;&#1078;&#1080;&#1084;&#1086;&#1074; &#1074;&#1089;&#1077; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086;
    ...  
    pfCustom:// &#1072; &#1079;&#1076;&#1077;&#1089;&#1100; &#1087;&#1088;&#1086;&#1074;&#1077;&#1076;&#1077;&#1084; &#1085;&#1077;&#1073;&#1086;&#1083;&#1100;&#1096;&#1086;&#1077; &#1080;&#1089;&#1089;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;
      begin
        if GetObject(FBitmap.Handle, SizeOf(DS), @DS) &gt; 0 then 
// &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1084; &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1086;&#1085;&#1085;&#1099;&#1081; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1086;&#1082;
          with DS, dsBmih do
            case biBitCount of
              16: case biCompression of
                  BI_RGB: SetBPP(15);
                  BI_BITFIELDS:
// &#1072;&#1085;&#1072;&#1083;&#1080;&#1079;&#1080;&#1088;&#1091;&#1077;&#1084; &#1089;&#1090;&#1072;&#1085;&#1076;&#1072;&#1088;&#1090;&#1085;&#1099;&#1077; &#1084;&#1072;&#1089;&#1082;&#1080; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; &#1082; &#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1099;&#1084; &#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1080;&#1084;
// &#1084;&#1072;&#1089;&#1082;&#1080; &#1086;&#1087;&#1080;&#1089;&#1072;&#1085;&#1099; &#1074; &#1088;&#1072;&#1079;&#1076;&#1077;&#1083;&#1077; &#1086; &#1095;&#1090;&#1077;&#1085;&#1080;&#1080; &#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;
// &#1076;&#1086;&#1089;&#1090;&#1072;&#1090;&#1086;&#1095;&#1085;&#1086; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1080;&#1090;&#1100; &#1086;&#1076;&#1085;&#1091; &#1084;&#1072;&#1089;&#1082;&#1091; - &#1074; &#1076;&#1072;&#1085;&#1085;&#1086;&#1084; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077; - &#1079;&#1077;&#1083;&#1077;&#1085;&#1086;&#1081; &#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1077;&#1081;
                    begin
                      if dsBitFields[1] = $7E0 then
                        SetBPP(16);
                      if dsBitFields[1] = $3E0 then
                        SetBPP(15);
                    end;
                end;
              32: case biCompression of
                  BI_RGB: SetBPP(32);
                  BI_BITFIELDS: if dsBitFields[1] = $FF0000 then
                      SetBPP(32);
                end;
            end;
      end;
</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1058;&#1077;&#1087;&#1077;&#1088;&#1100;
&#1089;&#1082;&#1086;&#1087;&#1080;&#1088;&#1091;&#1077;&#1084;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1091; (&#1076;&#1083;&#1103;
&#1090;&#1077;&#1093; &#1088;&#1077;&#1078;&#1080;&#1084;&#1086;&#1074;,
&#1075;&#1076;&#1077; &#1086;&#1085;&#1072;
&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090;)
&#1074;&#1086;
&#1074;&#1085;&#1091;&#1090;&#1088;&#1077;&#1085;&#1085;&#1077;&#1077;
&#1087;&#1086;&#1083;&#1077;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1085;&#1077;
&#1086;&#1073;&#1088;&#1072;&#1097;&#1072;&#1090;&#1100;&#1089;&#1103;
&#1082;&#1072;&#1078;&#1076;&#1099;&#1081; &#1088;&#1072;&#1079; &#1082;
&#1089;&#1074;&#1103;&#1079;&#1072;&#1085;&#1085;&#1086;&#1084;&#1091;
&#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1091; TBitmap:<!--mstheme--></font>
<pre>if FBPP &lt;= 8 then
  begin
    FLogPal.palVersion := $300;
    FLogPal.palNumEntries := 1 shl FBPP; //2^BPP
    GetPaletteEntries(FBitmap.Palette, 0, FLogPal.palNumEntries, FLogPal.palPalEntry[0]);
    FHPal := CreatePalette(PLogPalette(@FLogPal)^);
// &#1089;&#1086;&#1079;&#1076;&#1072;&#1076;&#1080;&#1084; &#1076;&#1083;&#1103; &#1076;&#1072;&#1085;&#1085;&#1086;&#1081; &#1083;&#1086;&#1075;&#1080;&#1095;&#1077;&#1089;&#1082;&#1086;&#1081; &#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099; &#1080; HPalette, &#1095;&#1090;&#1086; &#1085;&#1072;&#1084; &#1087;&#1086;&#1090;&#1088;&#1077;&#1073;&#1091;&#1077;&#1090;&#1089;&#1103; &#1087;&#1088;&#1080; &#1087;&#1086;&#1080;&#1089;&#1082;&#1077; &#1073;&#1083;&#1080;&#1078;&#1072;&#1081;&#1096;&#1077;&#1075;&#1086; &#1094;&#1074;&#1077;&#1090;&#1072;
  end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1047;&#1072;&#1087;&#1086;&#1084;&#1085;&#1080;&#1084;
&#1088;&#1072;&#1079;&#1084;&#1077;&#1088;&#1085;&#1086;&#1089;&#1090;&#1100;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072;:<!--mstheme--></font>
<pre>FWidth := FBitmap.Width;
  FHeight := FBitmap.Height;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1055;&#1086;&#1083;&#1091;&#1095;&#1080;&#1084;
&#1072;&#1076;&#1088;&#1077;&#1089; &#1073;&#1083;&#1086;&#1082;&#1072;
&#1076;&#1072;&#1085;&#1085;&#1099;&#1093;:<!--mstheme--></font>
<pre>FStart := Integer(FBitmap.Scanline[0]);</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1048;
&#1088;&#1072;&#1079;&#1085;&#1086;&#1089;&#1090;&#1100;
&#1084;&#1077;&#1078;&#1076;&#1091;
&#1072;&#1076;&#1088;&#1077;&#1089;&#1072;&#1084;&#1080;
&#1089;&#1086;&#1089;&#1077;&#1076;&#1085;&#1080;&#1093;
&#1089;&#1090;&#1088;&#1086;&#1082;
&#1088;&#1072;&#1079;&#1074;&#1077;&#1088;&#1090;&#1082;&#1080;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072; -
&#1086;&#1073;&#1099;&#1095;&#1085;&#1086;
&#1089;&#1090;&#1088;&#1086;&#1082;&#1080;
&#1093;&#1088;&#1072;&#1085;&#1103;&#1090;&#1089;&#1103; &#1074;
&#1086;&#1073;&#1088;&#1072;&#1090;&#1085;&#1086;&#1084;
&#1087;&#1086;&#1088;&#1103;&#1076;&#1082;&#1077;, &#1090;&#1072;&#1082;
&#1095;&#1090;&#1086; &#1074;&#1077;&#1083;&#1080;&#1095;&#1080;&#1085;&#1072;
&#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1089;&#1103; &#1074;
&#1101;&#1090;&#1086;&#1084; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077;
&#1086;&#1090;&#1088;&#1080;&#1094;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;&#1081;:<!--mstheme--></font>
<pre>FDelta := Integer(FBitmap.Scanline[1]) - FStart;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1045;&#1089;&#1083;&#1080;
&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090;
&#1074;&#1077;&#1088;&#1086;&#1103;&#1090;&#1085;&#1086;&#1089;&#1090;&#1100;,
&#1095;&#1090;&#1086; &#1074;&#1072;&#1078;&#1085;&#1099;&#1077;
&#1076;&#1083;&#1103;
&#1087;&#1088;&#1072;&#1074;&#1080;&#1083;&#1100;&#1085;&#1086;&#1075;&#1086;
&#1086;&#1073;&#1088;&#1072;&#1097;&#1077;&#1085;&#1080;&#1103;
&#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1099; Bitmap
&#1073;&#1091;&#1076;&#1091;&#1090;
&#1085;&#1077;&#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;
&#1080;&#1079;&#1084;&#1077;&#1085;&#1077;&#1085;&#1099;,
&#1084;&#1086;&#1078;&#1085;&#1086; (&#1085;&#1086;
&#1085;&#1077;&#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;,
&#1077;&#1089;&#1083;&#1080; &#1074;
&#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1077;
&#1087;&#1088;&#1077;&#1076;&#1091;&#1089;&#1084;&#1086;&#1090;&#1088;&#1077;&#1090;&#1100;
&#1075;&#1072;&#1088;&#1072;&#1085;&#1090;&#1080;&#1080;
&#1087;&#1077;&#1088;&#1077;&#1080;&#1085;&#1080;&#1094;&#1080;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080;
QuickPixels)
&#1086;&#1090;&#1089;&#1083;&#1077;&#1078;&#1080;&#1074;&#1072;&#1090;&#1100;
&#1101;&#1090;&#1080;
&#1080;&#1079;&#1084;&#1077;&#1085;&#1077;&#1085;&#1080;&#1103;,
&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1074;
&#1089;&#1074;&#1086;&#1081;&#1089;&#1090;&#1074;&#1086; TrackBitmapChange,
&#1073;&#1083;&#1072;&#1075;&#1086;&#1076;&#1072;&#1088;&#1103;
&#1090;&#1086;&#1084;&#1091;, &#1095;&#1090;&#1086; &#1091;
&#1082;&#1083;&#1072;&#1089;&#1089;&#1072; TBitmap
&#1080;&#1084;&#1077;&#1077;&#1090;&#1089;&#1103;
&#1089;&#1086;&#1073;&#1099;&#1090;&#1080;&#1077; OnChange:<!--mstheme--></font>
<pre>if FTrackBitmapChange then
    FBitmap.OnChange:=BitmapChange;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1054;&#1073;&#1098;&#1077;&#1082;&#1090; TQuickPixels
&#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103;
&#1079;&#1072;&#1085;&#1086;&#1074;&#1086;
&#1087;&#1088;&#1086;&#1080;&#1085;&#1080;&#1094;&#1080;&#1072;&#1083;&#1080;&#1079;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;
&#1087;&#1088;&#1080;
&#1080;&#1079;&#1084;&#1077;&#1085;&#1077;&#1085;&#1080;&#1080;
&#1088;&#1072;&#1079;&#1084;&#1077;&#1088;&#1086;&#1074; &#1080;&#1083;&#1080;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1072;.<!--mstheme--></font>
<pre>procedure TQuickPixels.BitmapChange(Sender: TObject);
begin
  if (FBitmap.Width&lt;&gt;FWidth) or (FBitmap.Height&lt;&gt;FHeight) or
    (FBitmap.PixelFormat&lt;&gt;FPixelFormat) then
      Attach(FBitmap);
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica"><!--mstheme--></font>
<h4><!--mstheme--><font face="Arial, Arial, Helvetica" color="#CCCCCC">&#1052;&#1077;&#1090;&#1086;&#1076;&#1099;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; &#1082;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1102;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1074;
&#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1086;&#1081;
&#1090;&#1086;&#1095;&#1082;&#1077;<!--mstheme--></font></h4>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1042; &#1082;&#1083;&#1072;&#1089;&#1089;&#1077;
&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1086; c&#1074;&#1086;&#1081;&#1089;&#1090;&#1074;&#1086;-&#1084;&#1072;&#1089;&#1089;&#1080;&#1074;
&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; (&#1074;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1080;
&#1087;&#1086;&#1076;&#1086;&#1073;&#1085;&#1086;&#1077; TCanvas.Pixels):<!--mstheme--></font>
<pre>property Pixels[X, Y: Integer]: TColor read GetPixels write SetPixels; default;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1069;&#1090;&#1086;
&#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1103;&#1077;&#1090;
&#1086;&#1073;&#1088;&#1072;&#1097;&#1072;&#1090;&#1100;&#1089;&#1103; &#1082;
&#1090;&#1086;&#1095;&#1082;&#1072;&#1084;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072; &#1086;&#1095;&#1077;&#1085;&#1100;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;:<!--mstheme--></font>
<pre>ColorValue:=QP[x,y];</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">&#1080;&#1083;&#1080;<!--mstheme--></font>
<pre>QP[x,y]:=ColorValue;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1052;&#1077;&#1090;&#1086;&#1076;&#1099; GetPixels &#1080;
SetPixels &#1084;&#1086;&#1078;&#1085;&#1086; &#1073;&#1099;&#1083;&#1086;
&#1073;&#1099; &#1086;&#1092;&#1086;&#1088;&#1084;&#1080;&#1090;&#1100;
&#1090;&#1072;&#1082;&#1080;&#1084;
&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1084;:<!--mstheme--></font>
<pre>case FBPP of
    1: //&#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; &#1080;&#1083;&#1080; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100; &#1094;&#1074;&#1077;&#1090; &#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072; &#1076;&#1083;&#1103; &#1076;&#1072;&#1085;&#1085;&#1086;&#1075;&#1086; &#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1072;
    4: ...
    8: ...</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1054;&#1076;&#1085;&#1072;&#1082;&#1086;
&#1087;&#1088;&#1080; &#1101;&#1090;&#1086;&#1084;
&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;&#1077;
&#1074;&#1088;&#1077;&#1084;&#1103;
&#1079;&#1072;&#1085;&#1080;&#1084;&#1072;&#1077;&#1090;
&#1080;&#1084;&#1077;&#1085;&#1085;&#1086;
&#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1077;
&#1087;&#1077;&#1088;&#1077;&#1073;&#1086;&#1088;&#1072;
&#1074;&#1072;&#1088;&#1080;&#1072;&#1085;&#1090;&#1086;&#1074;
&#1086;&#1087;&#1077;&#1088;&#1072;&#1090;&#1086;&#1088;&#1072; Case.
&#1041;&#1086;&#1083;&#1077;&#1077;
&#1073;&#1099;&#1089;&#1090;&#1088;&#1099;&#1081;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;
&#1086;&#1073;&#1077;&#1089;&#1087;&#1077;&#1095;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102;
&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1103;
&#1086;&#1090;&#1076;&#1077;&#1083;&#1100;&#1085;&#1099;&#1093;
&#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; &#1076;&#1083;&#1103;
&#1082;&#1072;&#1078;&#1076;&#1086;&#1075;&#1086;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1072;, &#1080;
&#1079;&#1072;&#1076;&#1072;&#1085;&#1080;&#1077;&#1084;
&#1087;&#1088;&#1086;&#1094;&#1077;&#1076;&#1091;&#1088;&#1085;&#1099;&#1093;
&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1093;
&#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074;
&#1090;&#1072;&#1082;&#1086;&#1075;&#1086; &#1090;&#1080;&#1087;&#1072;:<!--mstheme--></font>
<pre>TSetPixelsMethod = procedure(X, Y: Integer; const Value: TColor) of object;
TGetPixelsMethod = function(X, Y: Integer): TColor of object;

SetPixel: TSetPixelsMethod;
GetPixel: TGetPixelsMethod;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1057;&#1074;&#1103;&#1079;&#1099;&#1074;&#1072;&#1085;&#1080;&#1077;
&#1101;&#1090;&#1080;&#1093; &#1087;&#1086;&#1083;&#1077;&#1081; &#1089;
&#1082;&#1086;&#1085;&#1082;&#1088;&#1077;&#1090;&#1085;&#1099;&#1084;&#1080;
&#1084;&#1077;&#1090;&#1086;&#1076;&#1072;&#1084;&#1080;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072;
&#1087;&#1088;&#1086;&#1080;&#1089;&#1093;&#1086;&#1076;&#1080;&#1090;
&#1087;&#1088;&#1080; &#1079;&#1072;&#1076;&#1072;&#1085;&#1080;&#1080;
&#1089;&#1074;&#1086;&#1081;&#1089;&#1090;&#1074;&#1072; BPP &#1074;
&#1084;&#1077;&#1090;&#1086;&#1076;&#1077; SetBPP:<!--mstheme--></font>
<pre>case FBPP of
    1: if FByPaletteIndex then begin
         SetPixel := SetPixels1Index;
         GetPixel := GetPixels1Index;
       end else begin
         SetPixel := SetPixels1;
         GetPixel := GetPixels1;
       end;
....

procedure TQuickPixels.SetPixels(X, Y: Integer; const Value: TColor);
begin
  SetPixel(X, Y, Value);
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1042; &#1084;&#1077;&#1090;&#1086;&#1076;&#1072;&#1093;
&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1080; &#1080;
&#1095;&#1090;&#1077;&#1085;&#1080;&#1103;
&#1089;&#1074;&#1086;&#1081;&#1089;&#1090;&#1074;
&#1087;&#1088;&#1086;&#1080;&#1089;&#1093;&#1086;&#1076;&#1080;&#1090;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;
&#1087;&#1077;&#1088;&#1077;&#1072;&#1076;&#1088;&#1077;&#1089;&#1072;&#1094;&#1080;&#1103;.
&#1050;&#1086;&#1085;&#1077;&#1095;&#1085;&#1086;,
&#1090;&#1072;&#1082;&#1072;&#1103;
&#1094;&#1077;&#1087;&#1086;&#1095;&#1082;&#1072;
&#1074;&#1099;&#1079;&#1086;&#1074;&#1086;&#1074;
&#1087;&#1088;&#1080;&#1074;&#1086;&#1076;&#1080;&#1090; &#1082;
&#1085;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1084;&#1091;
&#1089;&#1085;&#1080;&#1078;&#1077;&#1085;&#1080;&#1102;
&#1073;&#1099;&#1089;&#1090;&#1088;&#1086;&#1076;&#1077;&#1081;&#1089;&#1090;&#1074;&#1080;&#1103;,
&#1080; &#1074; &#1090;&#1077;&#1093;
&#1089;&#1083;&#1091;&#1095;&#1072;&#1103;&#1093;,
&#1082;&#1086;&#1075;&#1076;&#1072; &#1095;&#1090;&#1077;&#1085;&#1080;&#1077;-&#1079;&#1072;&#1087;&#1080;&#1089;&#1100;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1086;&#1074;
&#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1091;&#1079;&#1082;&#1080;&#1084; &#1084;&#1077;&#1089;&#1090;&#1086;&#1084;,
&#1089;&#1090;&#1086;&#1080;&#1090; &#1089;&#1083;&#1077;&#1075;&#1082;&#1072;
&#1087;&#1086;&#1089;&#1090;&#1091;&#1087;&#1080;&#1090;&#1100;&#1089;&#1103;
&#1091;&#1076;&#1086;&#1073;&#1089;&#1090;&#1074;&#1086;&#1084;
&#1079;&#1072;&#1087;&#1080;&#1089;&#1080; &#1080;
&#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; Set/GetPixel
&#1085;&#1072;&#1087;&#1088;&#1103;&#1084;&#1091;&#1102;, &#1090;.&#1077;.
&#1074;&#1084;&#1077;&#1089;&#1090;&#1086;<!--mstheme--></font>
<pre>QP[x, y]:=ColorValue;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">&#1087;&#1080;&#1089;&#1072;&#1090;&#1100;<!--mstheme--></font>
<pre>QP.SetPixel(x, y, ColorValue);</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1053;&#1072;&#1080;&#1074;&#1099;&#1089;&#1096;&#1077;&#1081;
&#1078;&#1077; &#1089;&#1082;&#1086;&#1088;&#1086;&#1089;&#1090;&#1080;
&#1084;&#1086;&#1078;&#1085;&#1086;
&#1076;&#1086;&#1073;&#1080;&#1090;&#1100;&#1089;&#1103; &#1087;&#1088;&#1080;
&#1085;&#1077;&#1087;&#1086;&#1089;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;&#1084;
&#1074;&#1099;&#1079;&#1086;&#1074;&#1077;, &#1095;&#1090;&#1086;
&#1073;&#1091;&#1076;&#1077;&#1090; &#1085;&#1077; &#1090;&#1072;&#1082;
&#1091;&#1085;&#1080;&#1074;&#1077;&#1088;&#1089;&#1072;&#1083;&#1100;&#1085;&#1086;,
&#1085;&#1086; &#1087;&#1088;&#1080;&#1077;&#1084;&#1083;&#1077;&#1084;&#1086;
&#1087;&#1088;&#1080;
&#1087;&#1086;&#1089;&#1090;&#1086;&#1103;&#1085;&#1085;&#1086;&#1081;
&#1088;&#1072;&#1073;&#1086;&#1090;&#1077; &#1089;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072;&#1084;&#1080;
&#1086;&#1076;&#1085;&#1086;&#1075;&#1086;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1072; (&#1087;&#1088;&#1080;
&#1101;&#1090;&#1086;&#1084;
&#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103;
&#1087;&#1077;&#1088;&#1077;&#1085;&#1077;&#1089;&#1090;&#1080;
&#1084;&#1077;&#1090;&#1086;&#1076;&#1099; Set/GetPixelsXX &#1074; public-&#1089;&#1077;&#1082;&#1094;&#1080;&#1102;):<!--mstheme--></font>
<pre>SetPixels32(x, y, ColorValue);</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica"><!--mstheme--></font>
<h4><!--mstheme--><font face="Arial, Arial, Helvetica" color="#CCCCCC">&#1063;&#1090;&#1077;&#1085;&#1080;&#1077;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;
&#1094;&#1074;&#1077;&#1090;&#1072;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;<!--mstheme--></font></h4>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1056;&#1072;&#1089;&#1089;&#1084;&#1086;&#1090;&#1088;&#1080;&#1084;
&#1090;&#1077;&#1087;&#1077;&#1088;&#1100;
&#1076;&#1077;&#1090;&#1072;&#1083;&#1100;&#1085;&#1086;, &#1082;&#1072;&#1082;
&#1078;&#1077;
&#1086;&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1095;&#1090;&#1077;&#1085;&#1080;&#1077; &#1094;&#1074;&#1077;&#1090;&#1072;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072; &#1074;
&#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1086;&#1081;
&#1090;&#1086;&#1095;&#1082;&#1077; &#1076;&#1083;&#1103;
&#1082;&#1072;&#1078;&#1076;&#1086;&#1075;&#1086;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1072;.
&#1057;&#1085;&#1072;&#1095;&#1072;&#1083;&#1072;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1099; &#1073;&#1077;&#1079;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099;, &#1074;
&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1093;
&#1076;&#1072;&#1085;&#1085;&#1099;&#1077;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072;
&#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1072;&#1090;
&#1085;&#1077;&#1087;&#1086;&#1089;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;
&#1094;&#1074;&#1077;&#1090;. &#1044;&#1083;&#1103;
&#1083;&#1091;&#1095;&#1096;&#1077;&#1075;&#1086;
&#1087;&#1086;&#1085;&#1080;&#1084;&#1072;&#1085;&#1080;&#1103;
&#1087;&#1088;&#1080;&#1085;&#1094;&#1080;&#1087;&#1086;&#1074;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072;
&#1087;&#1088;&#1080;&#1074;&#1077;&#1076;&#1077;&#1084; &#1080;
&#1082;&#1086;&#1076; &#1085;&#1072;
&#1055;&#1072;&#1089;&#1082;&#1072;&#1083;&#1077;,
&#1087;&#1086;&#1089;&#1083;&#1091;&#1078;&#1080;&#1074;&#1096;&#1080;&#1081;
&#1083;&#1086;&#1075;&#1080;&#1095;&#1077;&#1089;&#1082;&#1086;&#1081;
&#1086;&#1089;&#1085;&#1086;&#1074;&#1086;&#1081;, &#1080;
&#1086;&#1082;&#1086;&#1085;&#1095;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1081;
&#1072;&#1089;&#1089;&#1077;&#1084;&#1073;&#1083;&#1077;&#1088;&#1085;&#1099;&#1081;
&#1074;&#1072;&#1088;&#1080;&#1072;&#1085;&#1090;.
<p align="justify">32 BPP: &#1082;&#1072;&#1078;&#1076;&#1099;&#1081;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;
&#1079;&#1072;&#1085;&#1080;&#1084;&#1072;&#1077;&#1090; 4
&#1073;&#1072;&#1081;&#1090;&#1072; (&#1074; &#1086;&#1076;&#1085;&#1086;&#1084;
&#1093;&#1088;&#1072;&#1085;&#1080;&#1090;&#1089;&#1103;
&#1089;&#1083;&#1091;&#1078;&#1077;&#1073;&#1085;&#1072;&#1103;
&#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1103;,
&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1086;
&#1087;&#1088;&#1086;&#1079;&#1088;&#1072;&#1095;&#1085;&#1086;&#1089;&#1090;&#1080;),
&#1072;&#1076;&#1088;&#1077;&#1089;&#1072;&#1094;&#1080;&#1103;
&#1073;&#1091;&#1076;&#1077;&#1090;
&#1076;&#1086;&#1074;&#1086;&#1083;&#1100;&#1085;&#1086;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;&#1081; (&#1040;&#1076;&#1088;&#1077;&#1089;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;=&#1041;&#1072;&#1079;&#1086;&#1074;&#1099;&#1081;
&#1072;&#1076;&#1088;&#1077;&#1089; &#1073;&#1083;&#1086;&#1082;&#1072;+&#1089;&#1084;&#1077;&#1097;&#1077;&#1085;&#1080;&#1077;
&#1089;&#1090;&#1088;&#1086;&#1082;&#1080;+X*4):<!--mstheme--></font>
<pre>RGBValue := PInteger(FStart + FDelta * Y + (X shl 2))^;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1053;&#1086;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103; R,G &#1080; B (&#1082;&#1088;&#1072;&#1089;&#1085;&#1086;&#1081;,
&#1079;&#1077;&#1083;&#1077;&#1085;&#1086;&#1081; &#1080;
&#1089;&#1080;&#1085;&#1077;&#1081;
&#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1077;&#1081;)
&#1080;&#1076;&#1091;&#1090; &#1074;
&#1086;&#1073;&#1088;&#1072;&#1090;&#1085;&#1086;&#1084;
&#1087;&#1086;&#1088;&#1103;&#1076;&#1082;&#1077;, &#1090;&#1072;&#1082;
&#1095;&#1090;&#1086; &#1076;&#1083;&#1103;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;
&#1074; &#1092;&#1086;&#1088;&#1084;&#1072;&#1090; TColor
&#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103; &#1080;&#1093;
&#1087;&#1077;&#1088;&#1077;&#1074;&#1077;&#1088;&#1085;&#1091;&#1090;&#1100;:<!--mstheme--></font>
<pre>function TQuickPixels.GetPixels32(X, Y: Integer): TColor;
asm
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
  mov eax,[ecx+4*edx]
  bswap eax
  shr eax, 8
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1042; Delphi &#1087;&#1086;
&#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103;
&#1089;&#1086;&#1075;&#1083;&#1072;&#1096;&#1077;&#1085;&#1080;&#1077; &#1086;
&#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1095;&#1077;
&#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1086;&#1074; register.
&#1044;&#1083;&#1103; &#1084;&#1077;&#1090;&#1086;&#1076;&#1072;
&#1082;&#1083;&#1072;&#1089;&#1089;&#1072; &#1101;&#1090;&#1086;
&#1086;&#1079;&#1085;&#1072;&#1095;&#1072;&#1077;&#1090;, &#1095;&#1090;&#1086;
&#1085;&#1072; &#1074;&#1093;&#1086;&#1076;&#1077; &#1074;
&#1087;&#1088;&#1086;&#1094;&#1077;&#1076;&#1091;&#1088;&#1091;
&#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088; EAX
&#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1080;&#1090;
&#1091;&#1082;&#1072;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100; &#1085;&#1072;
&#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;
&#1082;&#1083;&#1072;&#1089;&#1089;&#1072;- Self. &#1042; EDX
&#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1087;&#1077;&#1088;&#1074;&#1099;&#1081; &#1089;&#1083;&#1077;&#1074;&#1072;
&#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088; - &#1074;
&#1076;&#1072;&#1085;&#1085;&#1086;&#1084;
&#1089;&#1083;&#1091;&#1095;&#1072;&#1077; X, &#1072; &#1074; ECX -
&#1074;&#1090;&#1086;&#1088;&#1086;&#1081;
&#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088; -
&#1079;&#1076;&#1077;&#1089;&#1100; - Y. &#1045;&#1089;&#1083;&#1080;
&#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1086;&#1074;
&#1073;&#1086;&#1083;&#1100;&#1096;&#1077;, &#1086;&#1085;&#1080;
&#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1102;&#1090;&#1089;&#1103;
&#1095;&#1077;&#1088;&#1077;&#1079; &#1089;&#1090;&#1077;&#1082;. &#1042;
&#1087;&#1077;&#1088;&#1074;&#1086;&#1081;
&#1089;&#1090;&#1088;&#1086;&#1082;&#1077;
&#1087;&#1088;&#1080;&#1074;&#1077;&#1076;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086;
&#1082;&#1086;&#1076;&#1072;
&#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1091;&#1084;&#1085;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1089;
&#1091;&#1095;&#1077;&#1090;&#1086;&#1084; &#1079;&#1085;&#1072;&#1082;&#1072; Y
&#1085;&#1072; FDelta. FDelta - &#1087;&#1086;&#1083;&#1077;
&#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1072;
&#1082;&#1083;&#1072;&#1089;&#1089;&#1072;,
&#1087;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091;
&#1086;&#1073;&#1088;&#1072;&#1097;&#1077;&#1085;&#1080;&#1077; &#1082;
&#1085;&#1077;&#1084;&#1091; &#1080;
&#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1090;&#1072;&#1082;&#1080;&#1084;
&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1084;: [eax].FDelta.
&#1044;&#1072;&#1083;&#1077;&#1077;
&#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1089;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1089;
&#1087;&#1086;&#1083;&#1077;&#1084; FStart.
&#1060;&#1091;&#1085;&#1082;&#1094;&#1080;&#1103;
&#1074;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1077;&#1090;
&#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090; &#1074;
&#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088;&#1077; EAX,
&#1087;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091;
&#1087;&#1086;&#1083;&#1091;&#1095;&#1072;&#1077;&#1084; &#1074;
&#1101;&#1090;&#1086;&#1090; &#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088;
32-&#1073;&#1080;&#1090;&#1085;&#1086;&#1077;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077;,
&#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1072;&#1097;&#1077;&#1077;&#1089;&#1103;
&#1087;&#1086; &#1072;&#1076;&#1088;&#1077;&#1089;&#1091; &#1074;
&#1082;&#1074;&#1072;&#1076;&#1088;&#1072;&#1090;&#1085;&#1099;&#1093;
&#1089;&#1082;&#1086;&#1073;&#1082;&#1072;&#1093; (&#1089;
&#1086;&#1076;&#1085;&#1086;&#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1084;
&#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1077;&#1084;
&#1089;&#1084;&#1077;&#1097;&#1077;&#1085;&#1080;&#1103;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072; &#1074;
&#1089;&#1090;&#1088;&#1086;&#1082;&#1077;). &#1047;&#1072;&#1090;&#1077;&#1084;
&#1084;&#1077;&#1085;&#1103;&#1077;&#1084;
&#1087;&#1086;&#1088;&#1103;&#1076;&#1086;&#1082;
&#1089;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;
&#1073;&#1072;&#1081;&#1090; &#1080;
&#1089;&#1076;&#1074;&#1080;&#1075;&#1072;&#1077;&#1084;
&#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090;
&#1074;&#1087;&#1088;&#1072;&#1074;&#1086;,
&#1087;&#1086;&#1083;&#1091;&#1095;&#1072;&#1103;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1074;
&#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1080;&#1080;
&#1089; &#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1086;&#1084; TColor.
<p align="justify">24 BPP: &#1082;&#1072;&#1078;&#1076;&#1099;&#1081;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;
&#1079;&#1072;&#1085;&#1080;&#1084;&#1072;&#1077;&#1090; 3
&#1073;&#1072;&#1081;&#1090;&#1072;.
&#1042;&#1086;&#1079;&#1085;&#1080;&#1082;&#1072;&#1077;&#1090;
&#1089;&#1086;&#1073;&#1083;&#1072;&#1079;&#1085;
&#1095;&#1080;&#1090;&#1072;&#1090;&#1100; &#1089;&#1088;&#1072;&#1079;&#1091; 4
&#1073;&#1072;&#1081;&#1090;&#1072;, &#1095;&#1090;&#1086;
&#1073;&#1099;&#1089;&#1090;&#1088;&#1077;&#1077;, &#1085;&#1086;
&#1076;&#1077;&#1083;&#1072;&#1090;&#1100; &#1090;&#1072;&#1082;,
&#1091;&#1074;&#1099;, &#1085;&#1077;&#1083;&#1100;&#1079;&#1103; -
&#1087;&#1088;&#1080;
&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1085;&#1099;&#1093;
&#1088;&#1072;&#1079;&#1084;&#1077;&#1088;&#1072;&#1093;
&#1073;&#1080;&#1090;&#1084;&#1072;&#1087;&#1072;
&#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1099;
&#1089;&#1080;&#1090;&#1091;&#1072;&#1094;&#1080;&#1080;, &#1095;&#1090;&#1086;
&#1073;&#1083;&#1086;&#1082; &#1076;&#1072;&#1085;&#1085;&#1099;&#1093;
&#1073;&#1091;&#1076;&#1077;&#1090;
&#1079;&#1072;&#1085;&#1080;&#1084;&#1072;&#1090;&#1100;
&#1090;&#1086;&#1095;&#1085;&#1086; &#1086;&#1076;&#1085;&#1091;
&#1087;&#1086;&#1083;&#1085;&#1086;&#1089;&#1090;&#1100;&#1102;
&#1079;&#1072;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1085;&#1091;&#1102;
&#1089;&#1090;&#1088;&#1072;&#1085;&#1080;&#1094;&#1091;
&#1087;&#1072;&#1084;&#1103;&#1090;&#1080; (4&#1050;) (&#1080;&#1083;&#1080;
&#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086;
&#1079;&#1072;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1085;&#1099;&#1093;),
&#1080; &#1095;&#1090;&#1077;&#1085;&#1080;&#1077;
&#1082;&#1088;&#1072;&#1081;&#1085;&#1077;&#1075;&#1086;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;
&#1084;&#1086;&#1078;&#1077;&#1090;
&#1087;&#1088;&#1080;&#1074;&#1077;&#1089;&#1090;&#1080; &#1082;
&#1074;&#1099;&#1093;&#1086;&#1076;&#1091; &#1079;&#1072;
&#1075;&#1088;&#1072;&#1085;&#1080;&#1094;&#1099;
&#1074;&#1080;&#1088;&#1090;&#1091;&#1072;&#1083;&#1100;&#1085;&#1086;&#1075;&#1086;
&#1072;&#1076;&#1088;&#1077;&#1089;&#1085;&#1086;&#1075;&#1086;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1088;&#1072;&#1085;&#1089;&#1090;&#1074;&#1072;,
&#1086;&#1090;&#1074;&#1077;&#1076;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086;
&#1087;&#1088;&#1086;&#1094;&#1077;&#1089;&#1089;&#1091;, &#1095;&#1090;&#1086;
&#1074;&#1099;&#1079;&#1086;&#1074;&#1077;&#1090;
&#1086;&#1096;&#1080;&#1073;&#1082;&#1091;
&#1085;&#1072;&#1088;&#1091;&#1096;&#1077;&#1085;&#1080;&#1103;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; (Access Violation).
&#1058;&#1072;&#1082; &#1095;&#1090;&#1086; &#1073;&#1091;&#1076;&#1077;&#1084;
&#1095;&#1077;&#1089;&#1090;&#1085;&#1086;
&#1082;&#1086;&#1087;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100; 3
&#1073;&#1072;&#1081;&#1090;&#1072;. &#1050;&#1072;&#1082; &#1080; &#1074;
&#1089;&#1083;&#1091;&#1095;&#1072;&#1077; 32BPP, &#1080;&#1093;
&#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103;
&#1080;&#1085;&#1074;&#1077;&#1088;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;.<!--mstheme--></font>
<pre>PRGBTriple(@i)^ := PRGBTriple(FStart + FDelta * Y + 3 * X)^;

asm
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
//&#1074;&#1099;&#1095;&#1080;&#1089;&#1083;&#1103;&#1077;&#1084; &#1072;&#1076;&#1088;&#1077;&#1089; &#1089;&#1090;&#1088;&#1086;&#1082;&#1080;, &#1082;&#1072;&#1082; &#1080; &#1088;&#1072;&#1085;&#1077;&#1077;
  add ecx,edx
//&#1095;&#1090;&#1086;&#1073;&#1099; &#1080;&#1079;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100;&#1089;&#1103; &#1086;&#1090; &#1091;&#1084;&#1085;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1085;&#1072; 3, &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1103;&#1077;&#1084; X
  movzx eax,WORD PTR [ecx+2*edx]
//&#1072; &#1090;&#1077;&#1087;&#1077;&#1088;&#1100; &#1091;&#1095;&#1080;&#1090;&#1099;&#1074;&#1072;&#1077;&#1084; &#1077;&#1097;&#1077; 2X &#1087;&#1088;&#1080; &#1087;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1080;&#1080; &#1089;&#1083;&#1086;&#1074;&#1072; &#1087;&#1086; &#1076;&#1072;&#1085;&#1085;&#1086;&#1084;&#1091; &#1072;&#1076;&#1088;&#1077;&#1089;&#1091;
//movzx - &#1076;&#1086;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1077; &#1089;&#1083;&#1086;&#1074;&#1072; &#1085;&#1091;&#1083;&#1103;&#1084;&#1080; &#1076;&#1086; &#1076;&#1074;&#1086;&#1081;&#1085;&#1086;&#1075;&#1086; &#1089;&#1083;&#1086;&#1074;&#1072; c - &#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1103;&#1077;&#1090;&#1089;&#1103; &#1073;&#1099;&#1089;&#1090;&#1088;&#1077;&#1077; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086;&#1075;&#1086; mov ax, SomeWord
  bswap eax
  shr eax,8
//1 &#1080; 2 &#1073;&#1072;&#1081;&#1090;&#1099; (&#1086;&#1090;&#1089;&#1095;&#1077;&#1090; &#1089; &#1085;&#1091;&#1083;&#1103;) eax &#1090;&#1077;&#1087;&#1077;&#1088;&#1100; &#1079;&#1072;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1099;
  movzx ecx, BYTE PTR [ecx+2*edx+2]
  or eax,ecx
//&#1087;&#1086;&#1083;&#1091;&#1095;&#1072;&#1077;&#1084; &#1074; &#1057;L &#1086;&#1089;&#1090;&#1072;&#1074;&#1096;&#1080;&#1081;&#1089;&#1103; &#1073;&#1072;&#1081;&#1090; &#1080; &#1082;&#1086;&#1084;&#1073;&#1080;&#1085;&#1080;&#1088;&#1091;&#1077;&#1084; &#1077;&#1075;&#1086; &#1089; EAX
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">16 BPP:
&#1062;&#1074;&#1077;&#1090;&#1086;&#1074;&#1099;&#1077;
&#1076;&#1072;&#1085;&#1085;&#1099;&#1077;
&#1079;&#1072;&#1085;&#1080;&#1084;&#1072;&#1102;&#1090;
&#1089;&#1083;&#1086;&#1074;&#1086;, &#1090;.&#1077;. 2
&#1073;&#1072;&#1081;&#1090;&#1072;, &#1074;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1077; 5-6-5 (R,G,B
&#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1080;&#1077;
&#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;).
&#1052;&#1072;&#1089;&#1082;&#1080; &#1076;&#1083;&#1103;
&#1074;&#1099;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1103;
&#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1080;&#1093;
&#1073;&#1091;&#1076;&#1091;&#1090; &#1090;&#1072;&#1082;&#1080;&#1077;: $F800,
$7E0 &#1080; 1F. &#1053;&#1086;
&#1087;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1085;&#1086;&#1077;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077;
&#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1080;&#1090;
&#1090;&#1086;&#1083;&#1100;&#1082;&#1086; 5 &#1080;&#1083;&#1080; 6
&#1089;&#1090;&#1072;&#1088;&#1096;&#1080;&#1093; &#1073;&#1080;&#1090;
&#1080;&#1079; 8, &#1090;&#1072;&#1082; &#1095;&#1090;&#1086;
&#1076;&#1083;&#1103;
&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103;
&#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1080;&#1103;
&#1084;&#1080;&#1085;&#1080;&#1084;&#1072;&#1083;&#1100;&#1085;&#1086;&#1075;&#1086;
&#1091;&#1088;&#1086;&#1074;&#1085;&#1103; 0(5)-&gt;0(8) &#1080;
&#1084;&#1072;&#1082;&#1089;&#1080;&#1084;&#1072;&#1083;&#1100;&#1085;&#1086;&#1075;&#1086;
31(5)-&gt;255(8)
&#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1084;&#1072;&#1089;&#1096;&#1090;&#1072;&#1073;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1099;&#1093;
&#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1080;&#1093;,
&#1079;&#1072;&#1090;&#1077;&#1084;
&#1089;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1077; &#1080;&#1093; &#1074;
&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1091;&#1102;
&#1090;&#1080;&#1087;&#1072; TColor<!--mstheme--></font>
<pre>w := PWord(FStart + FDelta * Y + (X shl 1))^;
  Result := (((w and $1F) * 541052) and $FF0000) or
            (((((w and $7E0) shr 5) * 266294) shr 8) and $FF00) or
            ((((w and $F800) shr 11) * 541052) shr 16);

asm
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
  movzx eax,word ptr [ecx+2*edx]
//&#1072;&#1085;&#1072;&#1083;&#1086;&#1075; &#1087;&#1077;&#1088;&#1074;&#1086;&#1081; &#1089;&#1090;&#1088;&#1086;&#1082;&#1080; &#1085;&#1072; &#1055;&#1072;&#1089;&#1082;&#1072;&#1083;&#1077;
  mov ecx,eax
  and ecx,$1F
//&#1074;&#1099;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1077; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1084;&#1072;&#1089;&#1082;&#1080; &#1086;&#1076;&#1085;&#1086;&#1081; &#1080;&#1079; &#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1080;&#1093;
  imul ecx,541052
  and ecx,$FF0000
//&#1084;&#1072;&#1089;&#1096;&#1090;&#1072;&#1073;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; - &#1090;&#1077;&#1087;&#1077;&#1088;&#1100; &#1074;&#1090;&#1086;&#1088;&#1086;&#1081; &#1073;&#1072;&#1081;&#1090; ECX &#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1080;&#1090; &#1101;&#1090;&#1091; &#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1091;&#1102; &#1094;&#1074;&#1077;&#1090;&#1072;
  mov edx,eax
  and edx,$7E0
  imul edx,135263
  shr edx,12
  and eax,$F800
  and edx,$FF00
  imul eax,135263
  shr eax,24
//&#1090;&#1086; &#1078;&#1077; &#1089;&#1072;&#1084;&#1086;&#1077; &#1076;&#1083;&#1103; &#1076;&#1074;&#1091;&#1093; &#1086;&#1089;&#1090;&#1072;&#1074;&#1096;&#1080;&#1093;&#1089;&#1103; &#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1080;&#1093;
  or eax,ecx
  or eax,edx
//&#1082;&#1086;&#1084;&#1073;&#1080;&#1085;&#1080;&#1088;&#1091;&#1077;&#1084; &#1073;&#1072;&#1081;&#1090;&#1099; &#1080;&#1079; EAX,ECX,EDX 
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">15 BPP: &#1050;&#1072;&#1082; &#1080; &#1076;&#1083;&#1103;
16 &#1073;&#1080;&#1090;, &#1076;&#1072;&#1085;&#1085;&#1099;&#1077;
&#1079;&#1072;&#1085;&#1080;&#1084;&#1072;&#1102;&#1090;
&#1089;&#1083;&#1086;&#1074;&#1086;, &#1085;&#1086;
&#1089;&#1090;&#1072;&#1088;&#1096;&#1080;&#1081; &#1073;&#1080;&#1090;
&#1085;&#1077;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103;,
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090; 5-5-5, &#1072;
&#1084;&#1072;&#1089;&#1082;&#1080;: $7&#1057;00, $3E0 &#1080; 1F:<!--mstheme--></font>
<pre>// &#1072;&#1085;&#1072;&#1083;&#1086;&#1075;((w and $1F) shl 19) or ((w and $3E0) shl 6) or ((w and $7C00) shr 7)
// &#1089; &#1084;&#1072;&#1089;&#1096;&#1090;&#1072;&#1073;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084; 5 &#1073;&#1080;&#1090; &#1085;&#1072; 8 (31-&gt;255)
Result := (((w and $1F) * 541052) and $FF0000) or
          (((((w and $3E0) shr 5) * 541052) shr 8) and $FF00) or
          ((((w and $7C00) shr 10) * 541052) shr 16);</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1040;&#1089;&#1089;&#1077;&#1084;&#1073;&#1083;&#1077;&#1088;&#1085;&#1099;&#1081;
&#1082;&#1086;&#1076; &#1087;&#1086;&#1095;&#1090;&#1080;
&#1090;&#1072;&#1082;&#1086;&#1081; &#1078;&#1077;, &#1082;&#1072;&#1082;
&#1076;&#1083;&#1103; 16 &#1073;&#1080;&#1090;.
<p align="justify">&#1058;&#1077;&#1087;&#1077;&#1088;&#1100;
&#1088;&#1072;&#1089;&#1089;&#1084;&#1086;&#1090;&#1088;&#1080;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1099; &#1089;
&#1075;&#1083;&#1091;&#1073;&#1080;&#1085;&#1086;&#1081;
&#1094;&#1074;&#1077;&#1090;&#1072; 1-8 &#1073;&#1080;&#1090;, &#1074;
&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1093;
&#1076;&#1072;&#1085;&#1085;&#1099;&#1077;
&#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1072;&#1090;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089; &#1094;&#1074;&#1077;&#1090;&#1072;
&#1074; &#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1077;.
<p align="justify">8 BPP: &#1056;&#1077;&#1078;&#1080;&#1084; &#1089; 256
&#1094;&#1074;&#1077;&#1090;&#1072;&#1084;&#1080;,
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;
&#1079;&#1072;&#1085;&#1080;&#1084;&#1072;&#1077;&#1090;
&#1088;&#1086;&#1074;&#1085;&#1086; &#1073;&#1072;&#1081;&#1090;,
&#1087;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1080;&#1077;
&#1077;&#1075;&#1086; &#1085;&#1072;&#1080;&#1073;&#1086;&#1083;&#1077;&#1077;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;:<!--mstheme--></font>
<pre>b := PByte(FStart + FDelta * Y + X)^;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1055;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1085;&#1099;&#1081;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1091;&#1077;&#1084;
&#1089;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099; -
&#1090;&#1072;&#1073;&#1083;&#1080;&#1094;&#1099;
&#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1080;&#1103;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072; &#1080;
&#1089;&#1072;&#1084;&#1086;&#1075;&#1086;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;<!--mstheme--></font>
<pre>with FLogPal.palPalEntry[b] do 
           Result := peRed or (peGreen shl 8) or (peBlue shl 16);

asm
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
  movzx ecx, BYTE PTR [ecx+edx]
//&#1074; ECX &#1090;&#1077;&#1087;&#1077;&#1088;&#1100; &#1085;&#1086;&#1084;&#1077;&#1088; &#1094;&#1074;&#1077;&#1090;&#1072; &#1074; &#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1077;
  mov eax, DWORD PTR [eax+ecx*4+4].FLogPal
//&#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090; &#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1080; - &#1094;&#1074;&#1077;&#1090; &#1080;&#1079; &#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099;, &#1090;.&#1077;. &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1087;&#1086; &#1072;&#1076;&#1088;&#1077;&#1089;&#1091; -
//Self + &#1089;&#1084;&#1077;&#1097;&#1077;&#1085;&#1080;&#1077; &#1087;&#1086;&#1083;&#1103; FLogPal + &#1089;&#1084;&#1077;&#1097;&#1077;&#1085;&#1080;&#1077; &#1084;&#1072;&#1089;&#1089;&#1080;&#1074;&#1072; &#1094;&#1074;&#1077;&#1090;&#1086;&#1074; + &#1085;&#1086;&#1084;&#1077;&#1088; &#1094;&#1074;&#1077;&#1090;&#1072;*4 (4 = SizeOf(TPaletteEntry))
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">4 BPP: &#1050;&#1072;&#1078;&#1076;&#1099;&#1081;
&#1073;&#1072;&#1081;&#1090; &#1093;&#1088;&#1072;&#1085;&#1080;&#1090;
&#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1102;
&#1086;&#1073; &#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1077;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1076;&#1074;&#1091;&#1093;
&#1089;&#1086;&#1089;&#1077;&#1076;&#1085;&#1080;&#1093;
&#1090;&#1086;&#1095;&#1077;&#1082;, &#1090;&#1072;&#1082; &#1095;&#1090;&#1086;
&#1076;&#1083;&#1103;
&#1087;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1080;&#1103;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072;
&#1090;&#1086;&#1095;&#1077;&#1082; &#1089;
&#1095;&#1077;&#1090;&#1085;&#1099;&#1084; X
&#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103;
&#1089;&#1076;&#1074;&#1080;&#1085;&#1091;&#1090;&#1100;
&#1087;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1085;&#1099;&#1081;
&#1073;&#1072;&#1081;&#1090; &#1074;&#1087;&#1088;&#1072;&#1074;&#1086;
&#1085;&#1072; 4 &#1073;&#1080;&#1090;&#1072;, &#1072; &#1076;&#1083;&#1103;
&#1085;&#1077;&#1095;&#1077;&#1090;&#1085;&#1099;&#1093; X
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;
&#1074;&#1099;&#1076;&#1077;&#1083;&#1080;&#1090;&#1100;
&#1085;&#1091;&#1078;&#1085;&#1099;&#1081;
&#1087;&#1086;&#1083;&#1091;&#1073;&#1072;&#1081;&#1090;
&#1085;&#1072;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077;&#1084;
&#1084;&#1072;&#1089;&#1082;&#1080; $0F<!--mstheme--></font>
<pre>b := PByte(FStart + FDelta * Y + (X div 2))^;
if Odd(x) then 
  b:=b and $F
else
  b:=b shr 4;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1048;&#1079;&#1074;&#1083;&#1077;&#1095;&#1077;&#1085;&#1080;&#1077;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1080;&#1079;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099; (&#1089;&#1086;&#1089;&#1090;&#1086;&#1103;&#1097;&#1077;&#1081;
&#1074; &#1076;&#1072;&#1085;&#1085;&#1086;&#1084;
&#1089;&#1083;&#1091;&#1095;&#1072;&#1077; &#1080;&#1079; 16
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;)
&#1072;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080;&#1095;&#1085;&#1086;
&#1089;&#1083;&#1091;&#1095;&#1072;&#1102; 8 BPP<!--mstheme--></font>
<pre>asm
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
  shr edx,1
//X div 2
  movzx ecx, BYTE PTR [ecx+edx]
  jnc @@IsEven
//&#1092;&#1083;&#1072;&#1075; &#1087;&#1077;&#1088;&#1077;&#1085;&#1086;&#1089;&#1072; CF &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1083;&#1077;&#1085; &#1087;&#1088;&#1080; &#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1080; Shr, &#1077;&#1089;&#1083;&#1080; &#1084;&#1083;&#1072;&#1076;&#1096;&#1080;&#1081; &#1073;&#1080;&#1090; &#1073;&#1099;&#1083; &#1077;&#1076;&#1080;&#1085;&#1080;&#1095;&#1085;&#1099;&#1084;, &#1090;.&#1077;. X &#1085;&#1077;&#1095;&#1077;&#1090;&#1085;&#1086;
  and ecx,$0F
  jmp @@GetCol
@@IsEven:
  shr ecx,4
@@GetCol:
  mov eax, DWORD PTR [eax+ecx*4+4].FLogPal
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">1 BPP: &#1050;&#1072;&#1078;&#1076;&#1099;&#1081;
&#1073;&#1072;&#1081;&#1090; &#1093;&#1088;&#1072;&#1085;&#1080;&#1090;
&#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1102;
&#1086;&#1073; &#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072;&#1093; 8
&#1090;&#1086;&#1095;&#1077;&#1082;, &#1076;&#1083;&#1103;
&#1074;&#1099;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1103;
&#1085;&#1091;&#1078;&#1085;&#1086;&#1075;&#1086;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072; &#1083;&#1080;&#1073;&#1086;
&#1085;&#1072;&#1082;&#1083;&#1072;&#1076;&#1099;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1084;&#1072;&#1089;&#1082;&#1072;, &#1079;&#1072;&#1090;&#1077;&#1084;
&#1087;&#1088;&#1086;&#1080;&#1079;&#1074;&#1086;&#1076;&#1080;&#1090;&#1089;&#1103;
&#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1082;&#1072; &#1085;&#1072;
&#1085;&#1091;&#1083;&#1077;&#1074;&#1086;&#1077;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077;,
&#1083;&#1080;&#1073;&#1086; &#1073;&#1072;&#1081;&#1090;
&#1089;&#1076;&#1074;&#1080;&#1075;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1074;&#1087;&#1088;&#1072;&#1074;&#1086; &#1085;&#1072;
&#1085;&#1091;&#1078;&#1085;&#1086;&#1077;
&#1088;&#1072;&#1089;&#1089;&#1090;&#1086;&#1103;&#1085;&#1080;&#1077; &#1080;
&#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1084;&#1083;&#1072;&#1076;&#1096;&#1080;&#1081; &#1073;&#1080;&#1090;.<!--mstheme--></font>
<pre>b := PByte(FStart + FDelta * Y + (X shr 3))^;
        b := (b shr (7 - (X mod 8))) and 1;

asm
  push ebx
//&#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1080;&#1084; &#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088; EBX &#1074; &#1089;&#1090;&#1077;&#1082;&#1077; - &#1086;&#1085; &#1085;&#1072;&#1084; &#1087;&#1086;&#1085;&#1072;&#1076;&#1086;&#1073;&#1080;&#1090;&#1089;&#1103;, &#1072; &#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1080;&#1084;&#1086;&#1077; &#1077;&#1075;&#1086; &#1087;&#1086;&#1089;&#1083;&#1077; &#1074;&#1099;&#1093;&#1086;&#1076;&#1072; &#1080;&#1079; &#1087;&#1088;&#1086;&#1094;&#1077;&#1076;&#1091;&#1088;&#1099; &#1085;&#1077; &#1076;&#1086;&#1083;&#1078;&#1085;&#1086; &#1087;&#1086;&#1089;&#1090;&#1088;&#1072;&#1076;&#1072;&#1090;&#1100;
  mov ebx,edx
//&#1074; EBX &#1090;&#1077;&#1087;&#1077;&#1088;&#1100; X
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
  shr edx,3
//X div 8
  movzx edx, BYTE PTR [ecx+edx ]
//&#1074; DL &#1090;&#1077;&#1087;&#1077;&#1088;&#1100; &#1073;&#1072;&#1081;&#1090;, &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1102;&#1097;&#1080;&#1081; 8 &#1090;&#1086;&#1095;&#1082;&#1072;&#1084;
  mov ecx,ebx
  and ecx,7
//X mod 8
  mov ebx,edx
  mov edx,$80
//1000000b
  shr edx,cl
//&#1089;&#1076;&#1074;&#1080;&#1075;&#1072;&#1077;&#1084; &#1077;&#1076;&#1080;&#1085;&#1080;&#1095;&#1082;&#1091; &#1074;&#1087;&#1088;&#1072;&#1074;&#1086; &#1085;&#1072; X mod 8
  and ebx,edx
//&#1085;&#1072;&#1082;&#1083;&#1072;&#1076;&#1099;&#1074;&#1072;&#1077;&#1084; &#1084;&#1072;&#1089;&#1082;&#1091;
  pop ebx
  jz @@Zero
//&#1077;&#1089;&#1083;&#1080; &#1085;&#1091;&#1078;&#1085;&#1099;&#1081; &#1073;&#1080;&#1090; &#1085;&#1091;&#1083;&#1077;&#1074;&#1086;&#1081;, &#1074;&#1099;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085; &#1092;&#1083;&#1072;&#1075; ZF
  mov eax, DWORD PTR [eax+8].FLogPal
//&#1073;&#1080;&#1090; &#1077;&#1076;&#1080;&#1085;&#1080;&#1095;&#1085;&#1099;&#1081;, &#1073;&#1077;&#1088;&#1077;&#1084; &#1080;&#1079; &#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099; 1-&#1081; &#1094;&#1074;&#1077;&#1090;
  jmp @@Exit
@@Zero:
//&#1073;&#1077;&#1088;&#1077;&#1084; &#1080;&#1079; &#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099; 0-&#1081; &#1094;&#1074;&#1077;&#1090;
  mov eax, DWORD PTR [eax+4].FLogPal
@@Exit:
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1054;&#1090;&#1084;&#1077;&#1090;&#1080;&#1084;,
&#1095;&#1090;&#1086; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082;
&#1090;&#1086;&#1095;&#1082;&#1072;&#1084; &#1074;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1072;&#1093; &#1089;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1086;&#1081;
&#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100;
&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;
&#1084;&#1077;&#1076;&#1083;&#1077;&#1085;&#1085;&#1077;&#1077; (&#1086;&#1089;&#1086;&#1073;&#1077;&#1085;&#1085;&#1086;
&#1087;&#1088;&#1080;
&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1077;
&#1094;&#1074;&#1077;&#1090;&#1072;, &#1095;&#1090;&#1086;
&#1073;&#1091;&#1076;&#1077;&#1090;
&#1088;&#1072;&#1089;&#1089;&#1084;&#1086;&#1090;&#1088;&#1077;&#1085;&#1086;
&#1085;&#1080;&#1078;&#1077;), &#1087;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091;
&#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1086;&#1074;&#1072;&#1085;&#1086;
&#1080; &#1087;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1080;&#1077;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072; &#1074;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1077; &#1073;&#1077;&#1079;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;
&#1074; &#1094;&#1074;&#1077;&#1090;, &#1095;&#1090;&#1086;
&#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100;
&#1087;&#1086;&#1083;&#1077;&#1079;&#1085;&#1086; &#1087;&#1088;&#1080;
&#1088;&#1072;&#1073;&#1086;&#1090;&#1077; &#1089;
&#1073;&#1080;&#1090;&#1084;&#1072;&#1087;&#1072;&#1084;&#1080; &#1089;
&#1080;&#1079;&#1074;&#1077;&#1089;&#1090;&#1085;&#1086;&#1081;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1086;&#1081;,
&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1074;
&#1075;&#1088;&#1072;&#1076;&#1072;&#1094;&#1080;&#1103;&#1093;
&#1089;&#1077;&#1088;&#1086;&#1075;&#1086;, &#1082;&#1086;&#1075;&#1076;&#1072;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;
&#1086;&#1076;&#1085;&#1086;&#1079;&#1085;&#1072;&#1095;&#1085;&#1086;
&#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090;
&#1103;&#1088;&#1082;&#1086;&#1089;&#1090;&#1080;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1074;
&#1076;&#1072;&#1085;&#1085;&#1086;&#1081; &#1090;&#1086;&#1095;&#1082;&#1077;.
&#1044;&#1083;&#1103; &#1101;&#1090;&#1086;&#1075;&#1086;
&#1089;&#1083;&#1091;&#1078;&#1080;&#1090;
&#1089;&#1074;&#1086;&#1081;&#1089;&#1090;&#1074;&#1086; ByPaletteIndex:
Boolean, &#1087;&#1088;&#1080;
&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1077;
&#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1075;&#1086; &#1074; True
&#1084;&#1077;&#1090;&#1086;&#1076;&#1099;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; GetPixels*
&#1079;&#1072;&#1084;&#1077;&#1085;&#1103;&#1102;&#1090;&#1089;&#1103;
&#1085;&#1072; GetPixels*Index.
&#1042;&#1089;&#1087;&#1086;&#1084;&#1086;&#1075;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1072;&#1103;
&#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1103; PalIndex(const
Color:TColor):Integer
&#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1103;&#1077;&#1090;
&#1087;&#1088;&#1080;
&#1085;&#1077;&#1086;&#1073;&#1093;&#1086;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;
&#1079;&#1072;&#1088;&#1072;&#1085;&#1077;&#1077;
&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1080;&#1090;&#1100;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;
&#1073;&#1083;&#1080;&#1078;&#1072;&#1081;&#1096;&#1077;&#1075;&#1086;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1074;
&#1079;&#1072;&#1076;&#1072;&#1085;&#1085;&#1086;&#1081;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1077;. &#1050;&#1086;&#1076;
&#1101;&#1090;&#1080;&#1093; &#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074;
&#1087;&#1088;&#1080;&#1074;&#1086;&#1076;&#1080;&#1090;&#1100; &#1085;&#1077;
&#1073;&#1091;&#1076;&#1077;&#1084;, &#1090;&#1072;&#1082; &#1082;&#1072;&#1082;
&#1086;&#1085;&#1080; &#1087;&#1086;&#1095;&#1090;&#1080;
&#1072;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080;&#1095;&#1085;&#1099;
&#1074;&#1099;&#1096;&#1077;&#1086;&#1087;&#1080;&#1089;&#1072;&#1085;&#1085;&#1099;&#1084;,
&#1080;&#1089;&#1082;&#1083;&#1102;&#1095;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1083;&#1080;&#1096;&#1100;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072; &#1074;
&#1094;&#1074;&#1077;&#1090;.
&#1054;&#1073;&#1088;&#1072;&#1090;&#1080;&#1090;&#1077;
&#1074;&#1085;&#1080;&#1084;&#1072;&#1085;&#1080;&#1077;, &#1095;&#1090;&#1086;
&#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090;
&#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1081; &#1076;&#1083;&#1103;
&#1091;&#1085;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1080;
&#1086;&#1073;&#1098;&#1103;&#1074;&#1083;&#1077;&#1085; &#1082;&#1072;&#1082;
TColor, &#1085;&#1086; &#1088;&#1077;&#1072;&#1083;&#1100;&#1085;&#1086;
&#1084;&#1083;&#1072;&#1076;&#1096;&#1080;&#1081; &#1073;&#1072;&#1081;&#1090;
&#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1080;&#1090;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;.<!--mstheme--></font>
<h4><!--mstheme--><font face="Arial, Arial, Helvetica" color="#CCCCCC">&#1059;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1072;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;
&#1094;&#1074;&#1077;&#1090;&#1072;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;<!--mstheme--></font></h4>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p>&#1056;&#1077;&#1078;&#1080;&#1084;&#1099; &#1073;&#1077;&#1079;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099;:
<p align="justify">32 BPP:
&#1040;&#1076;&#1088;&#1077;&#1089;&#1072;&#1094;&#1080;&#1103;
&#1072;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080;&#1095;&#1085;&#1072;
&#1084;&#1077;&#1090;&#1086;&#1076;&#1072;&#1084; Get.
&#1057;&#1085;&#1072;&#1095;&#1072;&#1083;&#1072;
&#1087;&#1077;&#1088;&#1077;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1077;&#1084;
&#1073;&#1072;&#1081;&#1090;&#1099; &#1074;
&#1085;&#1091;&#1078;&#1085;&#1086;&#1084;
&#1087;&#1086;&#1088;&#1103;&#1076;&#1082;&#1077;,
&#1079;&#1072;&#1090;&#1077;&#1084;
&#1079;&#1072;&#1087;&#1080;&#1089;&#1099;&#1074;&#1072;&#1077;&#1084;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1087;&#1086;
&#1085;&#1091;&#1078;&#1085;&#1086;&#1084;&#1091;
&#1072;&#1076;&#1088;&#1077;&#1089;&#1091;:<!--mstheme--></font>
<pre>PInteger(FStart + FDelta * Y + (X Shl 2))^ := SwappedValue;

procedure TQuickPixels.SetPixels32(X, Y: Integer; const Value: TColor);
asm
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
  mov eax, Value
  bswap eax
  shr eax, 8
  mov [ecx+4*edx],eax
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">24 BPP:
&#1048;&#1085;&#1074;&#1077;&#1088;&#1090;&#1080;&#1088;&#1091;&#1077;&#1084;
&#1087;&#1086;&#1088;&#1103;&#1076;&#1086;&#1082;
&#1073;&#1072;&#1081;&#1090;&#1086;&#1074;, &#1087;&#1080;&#1096;&#1077;&#1084;
3 &#1073;&#1072;&#1081;&#1090;&#1072;:<!--mstheme--></font>
<pre>PRGBTriple(FStart + FDelta * Y + 3 * X)^ := PRGBTriple(@i)^;

asm
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
  lea edx,[edx+edx*2]
  mov eax,[ebp+8] 
//&#1087;&#1086; &#1101;&#1090;&#1086;&#1084;&#1091; &#1072;&#1076;&#1088;&#1077;&#1089;&#1091; &#1074; &#1089;&#1090;&#1077;&#1082;&#1077; &#1085;&#1072;&#1093;&#1086;&#1076;&#1080;&#1090;&#1089;&#1103; Value -  &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1094;&#1074;&#1077;&#1090;&#1072;
  bswap eax
  shr eax, 8
  mov [ecx+edx],ax
  shr eax, 16
  mov [ecx+edx+2],al
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">16 BPP: &#1060;&#1086;&#1088;&#1084;&#1072;&#1090; &#1080;
&#1084;&#1072;&#1089;&#1082;&#1080; &#1091;&#1078;&#1077;
&#1088;&#1072;&#1089;&#1089;&#1084;&#1072;&#1090;&#1088;&#1080;&#1074;&#1072;&#1083;&#1080;&#1089;&#1100;
&#1074;&#1099;&#1096;&#1077;,
&#1084;&#1072;&#1089;&#1096;&#1090;&#1072;&#1073;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;
&#1085;&#1077; &#1085;&#1091;&#1078;&#1085;&#1086;,
&#1084;&#1083;&#1072;&#1076;&#1096;&#1080;&#1077; &#1073;&#1080;&#1090;&#1099;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1099;&#1093;
&#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1080;&#1093;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;
&#1080;&#1075;&#1085;&#1086;&#1088;&#1080;&#1088;&#1091;&#1102;&#1090;&#1089;&#1103;,
&#1095;&#1090;&#1086;
&#1076;&#1086;&#1089;&#1090;&#1080;&#1075;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1084;&#1086;&#1076;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1077;&#1081;
&#1084;&#1072;&#1089;&#1086;&#1082; &#1080;
&#1089;&#1076;&#1074;&#1080;&#1075;&#1086;&#1084;:<!--mstheme--></font>
<pre>w := ((Value And $F8) Shl 8) or
     ((Value And $FC00) Shr 5) or
     ((Value And $FF0000) Shr 19);
PWord(FStart + FDelta * Y + (X Shl 1))^ := w;

asm
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
  mov eax,[ebp+$08]
  push esi
  mov esi,[ebp+$08]
  and esi, $F8
  shl esi, 8
  push edi
  mov edi,[ebp+$08]
  and edi, $FC00
  shr edi, 5
  or esi,edi
  pop edi
  and eax, $FF0000
  shr eax, 19
  or eax,esi
  mov [ecx+edx*2],ax
  pop esi
end;

15 BPP: &#1040;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080;&#1095;&#1085;&#1072;&#1103; &#1089;&#1080;&#1090;&#1091;&#1072;&#1094;&#1080;&#1103;, &#1084;&#1077;&#1085;&#1103;&#1102;&#1090;&#1089;&#1103; &#1084;&#1072;&#1089;&#1082;&#1080; &#1080; &#1089;&#1076;&#1074;&#1080;&#1075;&#1080;:

w := ((Value And $F8) Shl 7) or
     ((Value And $F800) Shr 6) or
     ((Value And $FF0000) Shr 19);
PWord(FStart + FDelta * Y + (X Shl 1))^ := w;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1040;&#1089;&#1089;&#1077;&#1084;&#1073;&#1083;&#1077;&#1088;&#1085;&#1099;&#1081;
&#1082;&#1086;&#1076; &#1087;&#1086;&#1095;&#1090;&#1080;
&#1090;&#1072;&#1082;&#1086;&#1081; &#1078;&#1077;, &#1082;&#1072;&#1082;
&#1080; &#1076;&#1083;&#1103; 16 &#1073;&#1080;&#1090;
<p align="justify">8 BPP: &#1044;&#1083;&#1103;
&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1080;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1085;&#1091;&#1078;&#1085;&#1086;
&#1089;&#1085;&#1072;&#1095;&#1072;&#1083;&#1072;
&#1085;&#1072;&#1081;&#1090;&#1080; &#1080;&#1085;&#1076;&#1077;&#1082;&#1089;
&#1073;&#1083;&#1080;&#1078;&#1072;&#1081;&#1096;&#1077;&#1075;&#1086;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1074;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1077;, &#1095;&#1090;&#1086;
&#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1084;&#1077;&#1076;&#1083;&#1077;&#1085;&#1085;&#1086;&#1081;
&#1086;&#1087;&#1077;&#1088;&#1072;&#1094;&#1080;&#1077;&#1081; (&#1086;&#1095;&#1077;&#1074;&#1080;&#1076;&#1085;&#1086;,
&#1087;&#1088;&#1086;&#1080;&#1089;&#1093;&#1086;&#1076;&#1080;&#1090;
&#1087;&#1077;&#1088;&#1077;&#1073;&#1086;&#1088; 256
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099; &#1089;&#1086;
&#1089;&#1088;&#1072;&#1074;&#1085;&#1077;&#1085;&#1080;&#1077;&#1084;
&#1082;&#1074;&#1072;&#1076;&#1088;&#1072;&#1090;&#1072;
&#1088;&#1072;&#1089;&#1089;&#1090;&#1086;&#1103;&#1085;&#1080;&#1103; &#1074;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1084;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1088;&#1072;&#1085;&#1089;&#1090;&#1074;&#1077;
RGB &#1082;&#1072;&#1082; &#1089;&#1091;&#1084;&#1084;&#1099;
&#1088;&#1072;&#1079;&#1085;&#1086;&#1089;&#1090;&#1077;&#1081;
&#1082;&#1074;&#1072;&#1076;&#1088;&#1072;&#1090;&#1086;&#1074;
(Pal[i].Red-ColorValue.Red) &#1080; &#1090;.&#1076;.
&#1055;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091;
&#1088;&#1072;&#1079;&#1091;&#1084;&#1085;&#1086;
&#1079;&#1072;&#1087;&#1086;&#1084;&#1080;&#1085;&#1072;&#1090;&#1100;
&#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1080;&#1081;
&#1085;&#1072;&#1081;&#1076;&#1077;&#1085;&#1085;&#1099;&#1081;
&#1094;&#1074;&#1077;&#1090; &#1080; &#1077;&#1075;&#1086;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;, &#1095;&#1090;&#1086;
&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;
&#1091;&#1089;&#1082;&#1086;&#1088;&#1103;&#1077;&#1090;
&#1088;&#1072;&#1073;&#1086;&#1090;&#1091; &#1087;&#1088;&#1080;
&#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;&#1084;
&#1079;&#1072;&#1076;&#1072;&#1085;&#1080;&#1080;
&#1086;&#1076;&#1080;&#1085;&#1072;&#1082;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1076;&#1083;&#1103;
&#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1080;&#1093;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1086;&#1074;, &#1095;&#1090;&#1086;
&#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1076;&#1086;&#1089;&#1090;&#1072;&#1090;&#1086;&#1095;&#1085;&#1086;
&#1088;&#1072;&#1089;&#1087;&#1088;&#1086;&#1089;&#1090;&#1088;&#1072;&#1085;&#1077;&#1085;&#1085;&#1086;&#1081;
&#1089;&#1080;&#1090;&#1091;&#1072;&#1094;&#1080;&#1077;&#1081;:<!--mstheme--></font>
<pre>If Value &lt;&gt; FLastColor then begin
  FLastIndex := GetNearestPaletteIndex(FHPal, Value);
// &#1074;&#1086;&#1090; &#1080; &#1087;&#1088;&#1080;&#1075;&#1086;&#1076;&#1080;&#1083;&#1072;&#1089;&#1100; &#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1072;, &#1089;&#1086;&#1079;&#1076;&#1072;&#1085;&#1085;&#1072;&#1103; &#1074; &#1084;&#1077;&#1090;&#1086;&#1076;&#1077; Attach
  FLastColor := Value;
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1059;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1072;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072;
&#1086;&#1095;&#1077;&#1074;&#1080;&#1076;&#1085;&#1072;:<!--mstheme--></font>
<pre>PByte(FStart + FDelta * Y + X)^ := FLastIndex;

asm
  push ebx
  push esi
//&#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1080;&#1084; &#1074; &#1089;&#1090;&#1077;&#1082;&#1077; &#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088;&#1099;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; &#1085;&#1072;&#1084; &#1087;&#1086;&#1090;&#1088;&#1077;&#1073;&#1091;&#1102;&#1090;&#1089;&#1103; &#1076;&#1083;&#1103; &#1074;&#1089;&#1087;&#1086;&#1084;&#1086;&#1075;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1093; &#1086;&#1087;&#1077;&#1088;&#1072;&#1094;&#1080;&#1081;
  imul ecx,[eax].FDelta
  mov esi,[ebp+8]
//&#1087;&#1086; &#1101;&#1090;&#1086;&#1084;&#1091; &#1072;&#1076;&#1088;&#1077;&#1089;&#1091; &#1074; &#1089;&#1090;&#1077;&#1082;&#1077; &#1093;&#1088;&#1072;&#1085;&#1080;&#1090;&#1089;&#1103; &#1090;&#1088;&#1077;&#1090;&#1080;&#1081; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088; - &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077;  &#1094;&#1074;&#1077;&#1090;&#1072;
  add ecx,[eax].FStart
  cmp esi,[eax].FLastColor
  jz @@TheSame
  mov [eax].FLastColor,esi
//&#1079;&#1072;&#1087;&#1086;&#1084;&#1085;&#1080;&#1084; &#1094;&#1074;&#1077;&#1090;
  push ecx
  push edx
  push eax
  push esi
  mov eax,[eax].FHPal
  push eax
//&#1085;&#1091;&#1078;&#1085;&#1086; &#1085;&#1072;&#1081;&#1090;&#1080; &#1094;&#1074;&#1077;&#1090; &#1074; &#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1077;
//&#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1103;&#1077;&#1084; &#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088;&#1099;, &#1085;&#1091;&#1078;&#1085;&#1099;&#1077; &#1076;&#1083;&#1103; &#1074;&#1099;&#1079;&#1086;&#1074;&#1072; &#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1080; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1072; &#1091;&#1082;&#1083;&#1072;&#1076;&#1099;&#1074;&#1072;&#1077;&#1084; &#1074; &#1089;&#1090;&#1077;&#1082; 
//&#1074; &#1087;&#1086;&#1088;&#1103;&#1076;&#1082;&#1077;, &#1085;&#1077;&#1086;&#1073;&#1093;&#1086;&#1076;&#1080;&#1084;&#1086;&#1084; &#1076;&#1083;&#1103; &#1089;&#1086;&#1075;&#1083;&#1072;&#1096;&#1077;&#1085;&#1080;&#1103; stdcall
  call GetNearestPaletteIndex
  mov ebx,eax
//&#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090; &#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1080; - &#1080;&#1085;&#1076;&#1077;&#1082;&#1089; &#1094;&#1074;&#1077;&#1090;&#1072;
  pop eax
  pop edx
  pop ecx
//&#1074;&#1086;&#1089;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1084; &#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088;&#1099;
  mov [eax].FLastIndex,ebx
//&#1079;&#1072;&#1087;&#1086;&#1084;&#1085;&#1080;&#1084; &#1080;&#1085;&#1076;&#1077;&#1082;&#1089; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1077;&#1075;&#1086; &#1094;&#1074;&#1077;&#1090;&#1072;
  jmp @@SetCol
@@TheSame:
  mov ebx,[eax].FLastIndex
//&#1094;&#1074;&#1077;&#1090; &#1089; &#1087;&#1088;&#1086;&#1096;&#1083;&#1086;&#1075;&#1086; &#1074;&#1099;&#1079;&#1086;&#1074;&#1072; &#1086;&#1089;&#1090;&#1072;&#1083;&#1089;&#1103; &#1090;&#1072;&#1082;&#1080;&#1084; &#1078;&#1077;, &#1080;&#1085;&#1076;&#1077;&#1082;&#1089; &#1077;&#1075;&#1086; &#1091;&#1078;&#1077; &#1093;&#1088;&#1072;&#1085;&#1080;&#1090;&#1089;&#1103; &#1074; &#1087;&#1086;&#1083;&#1077; FLastIndex
@@SetCol:
  pop esi
  mov [ecx+edx],bl
//&#1079;&#1072;&#1087;&#1080;&#1096;&#1077;&#1084; &#1073;&#1072;&#1081;&#1090; &#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072; &#1087;&#1086; &#1074;&#1099;&#1095;&#1080;&#1089;&#1083;&#1077;&#1085;&#1085;&#1086;&#1084;&#1091; &#1088;&#1072;&#1085;&#1077;&#1077; &#1072;&#1076;&#1088;&#1077;&#1089;&#1091;
  pop ebx
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">4 BPP: &#1048;&#1085;&#1076;&#1077;&#1082;&#1089;
&#1085;&#1072;&#1093;&#1086;&#1076;&#1080;&#1084;
&#1072;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080;&#1095;&#1085;&#1086; 8-&#1073;&#1080;&#1090;&#1085;&#1086;&#1084;&#1091;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1091;,
&#1074;&#1099;&#1095;&#1080;&#1089;&#1083;&#1103;&#1077;&#1084;
&#1072;&#1076;&#1088;&#1077;&#1089;, &#1080;
&#1074;&#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;
&#1086;&#1090; &#1095;&#1077;&#1090;&#1085;&#1086;&#1089;&#1090;&#1080; X-&#1082;&#1086;&#1086;&#1088;&#1076;&#1080;&#1085;&#1072;&#1090;&#1099;
&#1087;&#1088;&#1080;&#1084;&#1077;&#1085;&#1103;&#1077;&#1084;
&#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1102;&#1097;&#1080;&#1077;
&#1084;&#1072;&#1089;&#1082;&#1080; &#1080; &#1089;&#1076;&#1074;&#1080;&#1075;,
&#1087;&#1088;&#1080;&#1095;&#1077;&#1084;
&#1089;&#1085;&#1072;&#1095;&#1072;&#1083;&#1072;
&#1087;&#1086;&#1083;&#1091;&#1095;&#1072;&#1077;&#1084;
&#1094;&#1077;&#1083;&#1099;&#1081; &#1073;&#1072;&#1081;&#1090;,
&#1084;&#1077;&#1085;&#1103;&#1103; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086;
&#1085;&#1091;&#1078;&#1085;&#1091;&#1102; &#1077;&#1075;&#1086;
&#1087;&#1086;&#1083;&#1086;&#1074;&#1080;&#1085;&#1091;.<!--mstheme--></font>
<pre>FAddr := FStart + FDelta * Y + (X Div 2);
  if Odd(x) Then
    PByte(FAddr)^ := (PByte(FAddr)^ And $0F) or (FLastIndex Shl 4)
  else
    PByte(FAddr)^ := (PByte(FAddr)^ And $F0) or FLastIndex;

asm
  push esi
  mov esi,ecx
  push ebx
  imul esi, [eax].FDelta
  mov ecx,Value
  mov ebx,[eax].FLastIndex
//&#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1077;&#1085;&#1085;&#1099;&#1081; &#1080;&#1085;&#1076;&#1077;&#1082;&#1089;
  add esi,[eax].FStart
  cmp ecx, [eax].FLastColor
  jz @@SetCol
  mov [eax].FLastColor,ecx
  mov ebx,eax
//&#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1080;&#1084; Self
  push edx
  push ecx
  push [eax].FHPal
  call GetNearestPaletteIndex
  xchg ebx,eax
//&#1074; EBX - &#1085;&#1072;&#1081;&#1076;&#1077;&#1085;&#1085;&#1099;&#1081; &#1080;&#1085;&#1076;&#1077;&#1082;&#1089; &#1094;&#1074;&#1077;&#1090;&#1072;
  pop edx
  mov [eax].FLastIndex,ebx
@@SetCol:
  shr edx, 1
//X div 2
  mov ecx, $f0
  lea esi,[esi+edx]
//&#1072;&#1076;&#1088;&#1077;&#1089; &#1085;&#1091;&#1078;&#1085;&#1086;&#1075;&#1086; &#1073;&#1072;&#1081;&#1090;&#1072;
  jc @@SetByte
//&#1092;&#1083;&#1072;&#1075; &#1087;&#1077;&#1088;&#1077;&#1085;&#1086;&#1089;&#1072;, &#1089;&#1074;&#1080;&#1076;&#1077;&#1090;&#1077;&#1083;&#1100;&#1089;&#1090;&#1074;&#1091;&#1102;&#1097;&#1080;&#1081; &#1086; &#1085;&#1077;&#1095;&#1077;&#1090;&#1085;&#1086;&#1089;&#1090;&#1080;, &#1091;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103; &#1087;&#1088;&#1080; &#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1080; shr
  mov ecx, $0f
  shl ebx, 4
//&#1076;&#1083;&#1103; &#1095;&#1077;&#1090;&#1085;&#1099;&#1093; &#1090;&#1086;&#1095;&#1077;&#1082; &#1091;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1077;&#1084; &#1089;&#1090;&#1072;&#1088;&#1096;&#1080;&#1081; &#1087;&#1086;&#1083;&#1091;&#1073;&#1072;&#1081;&#1090;
@@SetByte:
  mov eax,[esi]
//&#1074; AL - &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1099;&#1081; &#1073;&#1072;&#1081;&#1090;, &#1089;&#1086;&#1086;&#1090;&#1074;. &#1076;&#1074;&#1091;&#1084; &#1090;&#1086;&#1095;&#1082;&#1072;&#1084;
  and eax,ecx
//&#1086;&#1073;&#1085;&#1091;&#1083;&#1080;&#1084; &#1091;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1077;&#1084;&#1099;&#1081; &#1087;&#1086;&#1083;&#1091;&#1073;&#1072;&#1081;&#1090;
  or eax,ebx
//&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1084; &#1085;&#1086;&#1074;&#1086;&#1077; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1101;&#1090;&#1086;&#1075;&#1086; &#1087;&#1086;&#1083;&#1091;&#1073;&#1072;&#1081;&#1090;&#1072;
  pop ebx
  mov [esi],al
//&#1074;&#1077;&#1088;&#1085;&#1077;&#1084; &#1080;&#1079;&#1084;&#1077;&#1085;&#1077;&#1085;&#1085;&#1099;&#1081; &#1073;&#1072;&#1081;&#1090; &#1085;&#1072; &#1089;&#1074;&#1086;&#1077; &#1084;&#1077;&#1089;&#1090;&#1086;
  pop esi
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">1 BPP: &#1047;&#1076;&#1077;&#1089;&#1100;
&#1089;&#1080;&#1090;&#1091;&#1072;&#1094;&#1080;&#1103;
&#1087;&#1086;&#1095;&#1090;&#1080; &#1090;&#1072;&#1082;&#1072;&#1103;
&#1078;&#1077; - &#1074;&#1099;&#1095;&#1080;&#1089;&#1083;&#1103;&#1077;&#1084;
&#1084;&#1072;&#1089;&#1082;&#1091; &#1074;
&#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;
&#1086;&#1090; X, &#1087;&#1086;&#1083;&#1091;&#1095;&#1072;&#1077;&#1084;
&#1073;&#1072;&#1081;&#1090; &#1087;&#1086;
&#1085;&#1091;&#1078;&#1085;&#1086;&#1084;&#1091;
&#1072;&#1076;&#1088;&#1077;&#1089;&#1091; &#1080;
&#1091;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1077;&#1084;
&#1080;&#1083;&#1080;
&#1089;&#1073;&#1088;&#1072;&#1089;&#1099;&#1074;&#1072;&#1077;&#1084;
&#1085;&#1091;&#1078;&#1085;&#1099;&#1081; &#1073;&#1080;&#1090;:<!--mstheme--></font>
<pre>FAddr := FStart + FDelta * Y + (X Shr 3);
 b := $80 Shr (X Mod 8);
 If Value &lt;&gt; FLastColor Then begin
   FLastIndex := GetNearestPaletteIndex(FHPal, Value);
   FLastColor := Value;
 end;
 If FLastIndex = 0 Then
   PByte(FAddr)^ := PByte(FAddr)^ And (Not b)
 Else
   PByte(FAddr)^ := PByte(FAddr)^ Or b;

asm
  push ebx
  push esi
  mov esi,[ebp+8]
//&#1094;&#1074;&#1077;&#1090;
  cmp esi,[eax].FLastColor
  jz @@TheSame
  mov [eax].FLastColor,esi
  push ecx
  push edx
  push eax
  push esi
  mov eax,[eax].FHPal
  push eax
  call GetNearestPaletteIndex
  mov ebx,eax
  pop eax
  pop edx
  pop ecx
  mov [eax].FLastIndex,ebx
  jmp @@SetCol
@@TheSame:
  mov ebx,[eax].FLastIndex
@@SetCol:
  mov esi,[eax].FDelta
  imul esi,ecx
  add esi,[eax].FStart
  mov eax,edx
  shr eax, 3
//X div 8
  add esi,eax
  mov eax,[esi]
//&#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1083;&#1080; &#1073;&#1072;&#1081;&#1090; &#1089; &#1076;&#1072;&#1085;&#1085;&#1099;&#1084;&#1080; &#1086; 8 &#1090;&#1086;&#1095;&#1082;&#1072;&#1093;
  mov ecx,edx
  and ecx, 7
//X mod 8
  mov edx, $80
  shr edx,cl
//&#1084;&#1072;&#1089;&#1082;&#1072; &#1076;&#1083;&#1103; &#1085;&#1091;&#1078;&#1085;&#1086;&#1075;&#1086; &#1073;&#1080;&#1090;&#1072;
  or ebx,ebx
  jz @@IsZero
  or eax,edx
//&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1072; &#1073;&#1080;&#1090;&#1072; &#1074; 1
  jmp @@SetByte
@@IsZero:
  not edx
  and eax,edx
//&#1089;&#1073;&#1088;&#1086;&#1089; &#1073;&#1080;&#1090;&#1072; &#1074; 0
@@SetByte:
  mov [esi],al
//&#1079;&#1072;&#1087;&#1080;&#1089;&#1100; &#1073;&#1072;&#1081;&#1090;&#1072; &#1089; &#1080;&#1079;&#1084;&#1077;&#1085;&#1077;&#1085;&#1085;&#1086;&#1081; &#1090;&#1086;&#1095;&#1082;&#1086;&#1081;
  pop esi
  pop ebx
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1052;&#1077;&#1090;&#1086;&#1076;&#1099; &#1089;
&#1079;&#1072;&#1076;&#1072;&#1085;&#1080;&#1077;&#1084; &#1085;&#1077;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;, &#1072;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1099;
&#1074;&#1099;&#1075;&#1083;&#1103;&#1076;&#1103;&#1090;
&#1087;&#1088;&#1072;&#1082;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;
&#1090;&#1072;&#1082;&#1078;&#1077;, &#1074; &#1085;&#1080;&#1093;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;
&#1080;&#1089;&#1082;&#1083;&#1102;&#1095;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1085;&#1072;&#1093;&#1086;&#1078;&#1076;&#1077;&#1085;&#1080;&#1077;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1072;,
&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1076;&#1083;&#1103;
8 &#1073;&#1080;&#1090;:<!--mstheme--></font>
<pre>asm
  imul ecx,[eax].FDelta
  add ecx,[eax].FStart
  mov eax,[ebp+8]
  mov [ecx+edx], al
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1042;
&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1085;&#1086;&#1084;
&#1084;&#1086;&#1076;&#1091;&#1083;&#1077;
&#1085;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1072;&#1103;
&#1086;&#1087;&#1090;&#1080;&#1084;&#1080;&#1079;&#1072;&#1094;&#1080;&#1103;
&#1072;&#1089;&#1089;&#1077;&#1084;&#1073;&#1083;&#1077;&#1088;&#1085;&#1086;&#1075;&#1086;
&#1082;&#1086;&#1076;&#1072; &#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074;
Get** &#1080; Set** &#1082;&#1083;&#1072;&#1089;&#1089;&#1072; TQuickPixels
&#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1080;&#1083;&#1072;
&#1087;&#1086;&#1074;&#1099;&#1089;&#1080;&#1090;&#1100;
&#1089;&#1082;&#1086;&#1088;&#1086;&#1089;&#1090;&#1100;
&#1088;&#1072;&#1073;&#1086;&#1090;&#1099;
&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;&#1085;&#1086; &#1074; 2
&#1088;&#1072;&#1079;&#1072; &#1087;&#1086;
&#1089;&#1088;&#1072;&#1074;&#1085;&#1077;&#1085;&#1080;&#1102; &#1089;
&#1074;&#1072;&#1088;&#1080;&#1072;&#1085;&#1090;&#1086;&#1084; &#1085;&#1072;
&#1055;&#1072;&#1089;&#1082;&#1072;&#1083;&#1077; - &#1086;&#1090; 25
&#1076;&#1086; 80
&#1084;&#1080;&#1083;&#1083;&#1080;&#1086;&#1085;&#1086;&#1074;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1086;&#1074; &#1074;
&#1089;&#1077;&#1082;&#1091;&#1085;&#1076;&#1091; (&#1074;
&#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;
&#1086;&#1090; &#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1072;) &#1085;&#1072;
&#1082;&#1086;&#1084;&#1087;&#1100;&#1102;&#1090;&#1077;&#1088;&#1077; c
&#1087;&#1088;&#1086;&#1094;&#1077;&#1089;&#1089;&#1086;&#1088;&#1086;&#1084;
P3-600 &#1052;&#1043;&#1094; (10-20
&#1087;&#1088;&#1086;&#1094;&#1077;&#1089;&#1089;&#1086;&#1088;&#1085;&#1099;&#1093;
&#1090;&#1072;&#1082;&#1090;&#1086;&#1074; &#1085;&#1072;
&#1090;&#1086;&#1095;&#1082;&#1091;), &#1095;&#1090;&#1086;
&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;&#1085;&#1086; &#1085;&#1072;
&#1076;&#1074;&#1072; &#1087;&#1086;&#1088;&#1103;&#1076;&#1082;&#1072;
&#1073;&#1099;&#1089;&#1090;&#1088;&#1077;&#1077;, &#1095;&#1077;&#1084;
&#1087;&#1088;&#1080;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1080;
TCanvas.Pixels. &#1044;&#1083;&#1103;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1086;&#1074; &#1089;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1086;&#1081;
&#1089;&#1082;&#1086;&#1088;&#1086;&#1089;&#1090;&#1100; &#1087;&#1088;&#1080;
&#1074;&#1099;&#1074;&#1086;&#1076;&#1077;
&#1088;&#1072;&#1079;&#1085;&#1099;&#1093;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;,
&#1077;&#1089;&#1090;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;,
&#1089;&#1080;&#1083;&#1100;&#1085;&#1086;
&#1087;&#1072;&#1076;&#1072;&#1077;&#1090;.
&#1054;&#1090;&#1084;&#1077;&#1090;&#1080;&#1084;, &#1095;&#1090;&#1086;
&#1076;&#1083;&#1103;
&#1085;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1093;
&#1094;&#1077;&#1083;&#1077;&#1081; -
&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1076;&#1083;&#1103;
&#1087;&#1088;&#1086;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1103;
&#1075;&#1077;&#1086;&#1084;&#1077;&#1090;&#1088;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1081;
- &#1084;&#1086;&#1078;&#1085;&#1086;
&#1084;&#1086;&#1076;&#1080;&#1092;&#1080;&#1094;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;
&#1082;&#1086;&#1076; &#1082;&#1083;&#1072;&#1089;&#1089;&#1072;
&#1090;&#1072;&#1082;&#1080;&#1084;
&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1084;,
&#1095;&#1090;&#1086;&#1073;&#1099; &#1085;&#1077;
&#1087;&#1077;&#1088;&#1077;&#1074;&#1086;&#1076;&#1080;&#1090;&#1100;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103; &#1074;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1072;&#1093; 15 - 32 &#1073;&#1080;&#1090;
&#1074; TColor &#1080; &#1086;&#1073;&#1088;&#1072;&#1090;&#1085;&#1086;,
&#1082;&#1086;&#1087;&#1080;&#1088;&#1091;&#1103;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1074;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1077;
&#1093;&#1088;&#1072;&#1085;&#1077;&#1085;&#1080;&#1103;.
&#1054;&#1076;&#1085;&#1072;&#1082;&#1086;
&#1089;&#1082;&#1086;&#1088;&#1086;&#1089;&#1090;&#1100;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; &#1082;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;&#1084;
&#1085;&#1072;&#1089;&#1090;&#1086;&#1083;&#1100;&#1082;&#1086;
&#1074;&#1099;&#1089;&#1086;&#1082;&#1072;, &#1095;&#1090;&#1086;
&#1087;&#1088;&#1080;
&#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1080;
&#1083;&#1102;&#1073;&#1099;&#1093;
&#1076;&#1086;&#1087;&#1086;&#1083;&#1085;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1093;
&#1076;&#1077;&#1081;&#1089;&#1090;&#1074;&#1080;&#1081; (&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;,
&#1072;&#1092;&#1092;&#1080;&#1085;&#1085;&#1099;&#1093;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1081;)
&#1083;&#1080;&#1084;&#1080;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;
&#1089;&#1082;&#1086;&#1088;&#1086;&#1089;&#1090;&#1100;
&#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080;,
&#1089;&#1082;&#1086;&#1088;&#1077;&#1077; &#1074;&#1089;&#1077;&#1075;&#1086;,
&#1073;&#1091;&#1076;&#1091;&#1090; &#1074;
&#1086;&#1089;&#1085;&#1086;&#1074;&#1085;&#1086;&#1084;
&#1080;&#1084;&#1077;&#1085;&#1085;&#1086; &#1101;&#1090;&#1080;
&#1076;&#1086;&#1087;&#1086;&#1083;&#1085;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1077;
&#1076;&#1077;&#1081;&#1089;&#1090;&#1074;&#1080;&#1103;, &#1072; &#1085;&#1077;
&#1095;&#1090;&#1077;&#1085;&#1080;&#1077;-&#1079;&#1072;&#1087;&#1080;&#1089;&#1100;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1086;&#1074;.
<p align="justify">&#1042;&#1086;&#1090;
&#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090;&#1099;
&#1090;&#1077;&#1089;&#1090;&#1072;
&#1073;&#1099;&#1089;&#1090;&#1088;&#1086;&#1076;&#1077;&#1081;&#1089;&#1090;&#1074;&#1080;&#1103;
&#1085;&#1072; &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1086;&#1084;
&#1082;&#1086;&#1084;&#1087;&#1100;&#1102;&#1090;&#1077;&#1088;&#1077; (&#1088;&#1077;&#1078;&#1080;&#1084;&#1099;
&#1089; &#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1086;&#1081; -
&#1087;&#1088;&#1080; &#1079;&#1072;&#1076;&#1072;&#1085;&#1080;&#1080;
&#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1094;&#1074;&#1077;&#1090;&#1072;)
&#1074;
&#1084;&#1077;&#1075;&#1072;&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;&#1093;
&#1074; &#1089;&#1077;&#1082;&#1091;&#1085;&#1076;&#1091;:<!--mstheme--></font>
<pre>1 bpp Get    : 39.08 MP/s
 1 bpp GetIndx: 60.26 MP/s
 4 bpp Get    : 63.73 MP/s
 4 bpp GetIndx: 82.63 MP/s
 8 bpp Get    : 76.07 MP/s
 8 bpp GetIndx: 104.99 MP/s
15 bpp Get    : 31.63 MP/s
16 bpp Get    : 31.64 MP/s
24 bpp Get    : 55.48 MP/s
32 bpp Get    : 79.44 MP/s

 1 bpp Set    : 27.22 MP/s
 1 bpp SetIndx: 29.54 MP/s
 4 bpp Set    : 28.14 MP/s
 4 bpp SetIndx: 28.99 MP/s
 8 bpp Set    : 31.17 MP/s
 8 bpp SetIndx: 36.81 MP/s
15 bpp Set    : 31.58 MP/s
16 bpp Set    : 33.22 MP/s
24 bpp Set    : 33.90 MP/s
32 bpp Set    : 41.20 MP/s </pre>
<!--mstheme--><font face="Arial, Arial, Helvetica"><!--mstheme--></font>
<h4><!--mstheme--><font face="Arial, Arial, Helvetica" color="#CCCCCC">&#1044;&#1077;&#1084;&#1086;&#1085;&#1089;&#1090;&#1088;&#1072;&#1094;&#1080;&#1086;&#1085;&#1085;&#1072;&#1103;
&#1087;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1072;<!--mstheme--></font></h4>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1055;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1072;
QPixels &#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1103;&#1077;&#1090;
&#1080;&#1079;&#1084;&#1077;&#1088;&#1080;&#1090;&#1100;
&#1087;&#1088;&#1086;&#1080;&#1079;&#1074;&#1086;&#1076;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;&#1089;&#1090;&#1100;
&#1074; &#1088;&#1072;&#1079;&#1083;&#1080;&#1095;&#1085;&#1099;&#1093;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1072;&#1093; &#1080;
&#1076;&#1077;&#1084;&#1086;&#1085;&#1089;&#1090;&#1088;&#1080;&#1088;&#1091;&#1077;&#1090;
&#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086;
&#1085;&#1077;&#1089;&#1083;&#1086;&#1078;&#1085;&#1099;&#1093;
&#1075;&#1088;&#1072;&#1092;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093;
&#1101;&#1092;&#1092;&#1077;&#1082;&#1090;&#1086;&#1074;. &#1044;&#1083;&#1103;
&#1080;&#1079;&#1084;&#1077;&#1088;&#1077;&#1085;&#1080;&#1103;
&#1085;&#1091;&#1078;&#1085;&#1086;
&#1074;&#1099;&#1073;&#1088;&#1072;&#1090;&#1100;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1091;&#1102;
&#1075;&#1083;&#1091;&#1073;&#1080;&#1085;&#1091;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072;, &#1084;&#1077;&#1090;&#1086;&#1076;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1072; &#1076;&#1083;&#1103;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1086;&#1074; &#1089;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1086;&#1081; - &#1087;&#1086;
&#1085;&#1077;&#1087;&#1086;&#1089;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;&#1084;&#1091;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1080;&#1083;&#1080; &#1087;&#1086;
&#1077;&#1075;&#1086; &#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1091; &#1074;
&#1087;&#1072;&#1083;&#1080;&#1090;&#1088;&#1077;, &#1080;
&#1095;&#1090;&#1077;&#1085;&#1080;&#1077; &#1083;&#1080;&#1073;&#1086;
&#1079;&#1072;&#1087;&#1080;&#1089;&#1100;
&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103; - Get
&#1080;&#1083;&#1080; Set. &#1042;
&#1087;&#1088;&#1086;&#1094;&#1077;&#1076;&#1091;&#1088;&#1077;
&#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;
&#1089;&#1086;&#1079;&#1076;&#1072;&#1077;&#1090;&#1089;&#1103; Bitmap
&#1088;&#1072;&#1079;&#1084;&#1077;&#1088;&#1086;&#1084; 8&#1093;8
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1086;&#1074;
&#1079;&#1072;&#1076;&#1072;&#1085;&#1085;&#1086;&#1075;&#1086;
&#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1072;, &#1087;&#1088;&#1080;
&#1079;&#1072;&#1087;&#1080;&#1089;&#1080;
&#1076;&#1080;&#1072;&#1075;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1099;&#1084;
&#1090;&#1086;&#1095;&#1082;&#1072;&#1084;
&#1091;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1082;&#1088;&#1072;&#1089;&#1085;&#1099;&#1081; &#1094;&#1074;&#1077;&#1090;,
&#1087;&#1088;&#1080; &#1095;&#1090;&#1077;&#1085;&#1080;&#1080;
&#1089;&#1085;&#1072;&#1095;&#1072;&#1083;&#1072; &#1085;&#1072;
&#1073;&#1080;&#1090;&#1084;&#1072;&#1087;&#1077;
&#1088;&#1080;&#1089;&#1091;&#1102;&#1090;&#1089;&#1103;
&#1094;&#1074;&#1077;&#1090;&#1085;&#1099;&#1077;
&#1087;&#1086;&#1083;&#1086;&#1089;&#1082;&#1080;,
&#1079;&#1072;&#1090;&#1077;&#1084;
&#1095;&#1080;&#1090;&#1072;&#1102;&#1090;&#1089;&#1103;
&#1076;&#1080;&#1072;&#1075;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077;
&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1099;. &#1042;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1077; 1 &#1073;&#1080;&#1090; &#1080;
&#1087;&#1088;&#1080; &#1088;&#1072;&#1073;&#1086;&#1090;&#1077; &#1089;
&#1080;&#1085;&#1076;&#1077;&#1082;&#1089;&#1086;&#1084;
&#1094;&#1074;&#1077;&#1090;&#1072; &#1073;&#1091;&#1076;&#1091;&#1090;
&#1080;&#1089;&#1082;&#1072;&#1078;&#1077;&#1085;&#1099;.<!--mstheme--></font>
<pre>procedure TForm1.TestOneMode(BPP: integer; ByIndex, SetPix, DrawBmp: boolean);
...
begin
  SmallBmp := TBitmap.Create;
  ...
  case BPP of
    ...
    32: SmallBmp.PixelFormat := pf32bit;
  end;
  ...
  QueryPerformanceCounter(Tim1);
  for i := 1 to Cnt * 1000000 do
  begin
    j := i and 7;
  end;
  QueryPerformanceCounter(Tim2);
  OverHead := (Tim2 - Tim1 + j - j) / Freq;
//&#1074;&#1099;&#1095;&#1080;&#1089;&#1083;&#1077;&#1085;&#1080;&#1077; &#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1093; &#1079;&#1072;&#1090;&#1088;&#1072;&#1090; &#1085;&#1072; &#1087;&#1091;&#1089;&#1090;&#1086;&#1081; &#1094;&#1080;&#1082;&#1083;
//+ j - j  &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1086;&#1087;&#1090;&#1080;&#1084;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088; &#1085;&#1077; &#1091;&#1076;&#1072;&#1083;&#1080;&#1083; &#1090;&#1077;&#1083;&#1086; &#1094;&#1080;&#1082;&#1083;&#1072;
   ...
  QP.Attach(SmallBmp);
//&#1087;&#1088;&#1080;&#1089;&#1086;&#1077;&#1076;&#1080;&#1085;&#1077;&#1085;&#1080;&#1077; &#1082; &#1089;&#1086;&#1079;&#1076;&#1072;&#1085;&#1085;&#1086;&#1084;&#1091; &#1088;&#1072;&#1089;&#1090;&#1088;&#1091;
  if SetPix then
  begin
    QueryPerformanceCounter(Tim1);
    for i := 1 to Cnt * 1000000 do
    begin
      j := i and 7;
      QP.SetPixel(j, j, clRed);
//&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1072; &#1094;&#1074;&#1077;&#1090;&#1072;, &#1084;&#1086;&#1078;&#1085;&#1086; &#1087;&#1080;&#1089;&#1072;&#1090;&#1100; &#1080; QP[j, j]:= clRed;
    end;
    QueryPerformanceCounter(Tim2);
    if DrawBmp then
      Canvas.StretchDraw(Rect(0, 0, 80, 80), SmallBmp);
    Seconds := (Tim2 - Tim1) / Freq;
  end
  else
  begin
    for i := 0 to 7 do
      for j := 0 to 7 do
        SmallBmp.Canvas.Pixels[i, j] := SomeColors[j];
//&#1088;&#1072;&#1079;&#1085;&#1086;&#1094;&#1074;&#1077;&#1090;&#1085;&#1099;&#1077; &#1087;&#1086;&#1083;&#1086;&#1089;&#1082;&#1080;
    QueryPerformanceCounter(Tim1);
    for i := 1 to Cnt * 1000000 do
    begin
      j := i and 7;
      Col := QP.GetPixel(j, j);
//&#1095;&#1090;&#1077;&#1085;&#1080;&#1077; &#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1086;&#1074;
    end;
    QueryPerformanceCounter(Tim2);
    if DrawBmp then
      Canvas.StretchDraw(Rect(0, 0, 80, 80), SmallBmp);
    Seconds := (Tim2 - Tim1) / Freq;
  end;
  Memo1.Lines.Add(Format('%2d bpp %s%4s: %5f MP/s',
                         [BPP, SetGet, sByIndex, Cnt / (Seconds - OverHead)]));
//&#1074;&#1099;&#1074;&#1086;&#1076; &#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090;&#1072;
  SmallBmp.Free;
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">&#1052;&#1086;&#1078;&#1085;&#1086;
&#1087;&#1088;&#1086;&#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;
&#1080; &#1074;&#1089;&#1077; &#1088;&#1077;&#1078;&#1080;&#1084;&#1099;
&#1089;&#1088;&#1072;&#1079;&#1091;:<!--mstheme--></font>
<pre>procedure TForm1.TestAllClick(Sender: TObject);
var
  i: Integer;
  GetSet, byIndx: Boolean;
begin
  Refresh;
  Effect := 0;
  Memo1.Clear;
  for GetSet := False to True do
  begin
    for i := 0 to 6 do
      for byIndx := False to (i &lt; 3) do
        TestOneMode(BPPs[i], byIndx, GetSet, False);
    Memo1.Lines.Add('');
  end;
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">
<p align="justify">&#1055;&#1088;&#1080;
&#1074;&#1099;&#1073;&#1086;&#1088;&#1077;
&#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1080;&#1079;
&#1075;&#1088;&#1072;&#1092;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093;
&#1101;&#1092;&#1092;&#1077;&#1082;&#1090;&#1086;&#1074;
&#1091;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1075;&#1083;&#1086;&#1073;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103;
&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1072;&#1103; Effect,
&#1082;&#1086;&#1090;&#1086;&#1088;&#1072;&#1103;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103;
&#1074;
&#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1077;
&#1089;&#1086;&#1073;&#1099;&#1090;&#1080;&#1103; OnMouseMove, &#1080;
&#1076;&#1083;&#1103;
&#1080;&#1085;&#1090;&#1077;&#1088;&#1072;&#1082;&#1090;&#1080;&#1074;&#1085;&#1099;&#1093;
&#1088;&#1077;&#1078;&#1080;&#1084;&#1086;&#1074;
&#1087;&#1088;&#1086;&#1080;&#1089;&#1093;&#1086;&#1076;&#1080;&#1090;
&#1089;&#1074;&#1103;&#1079;&#1099;&#1074;&#1072;&#1085;&#1080;&#1077;
&#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1074; QuickPixels &#1089;
&#1087;&#1088;&#1077;&#1076;&#1074;&#1072;&#1088;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;
&#1079;&#1072;&#1075;&#1088;&#1091;&#1078;&#1077;&#1085;&#1085;&#1086;&#1081;
&#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1086;&#1081; Bmp &#1080;
&#1082;&#1086;&#1085;&#1090;&#1077;&#1081;&#1085;&#1077;&#1088;&#1086;&#1084;
&#1076;&#1083;&#1103;
&#1084;&#1086;&#1076;&#1080;&#1092;&#1080;&#1094;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1085;&#1086;&#1081;
- NewBmp:<!--mstheme--></font>
<pre>procedure TForm1.rgEffectsClick(Sender: TObject);
begin
  Refresh;
  Effect := rgEffects.ItemIndex;
  case Effect of
    0: Blur;
    1: FlyImage;
  else
    begin
      NewBmp.Assign(Bmp);
      Canvas.Draw(0, 0, NewBmp);
      QP.Attach(Bmp);
      QP2.Attach(NewBmp);
      w := QP.Width;
      h := QP.Height;
      Rct := Rect(5, 5, w - 6, h - 6);
      FullRct := Rect(0, 0, w - 1, h - 1);
    end;
  end;
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">Blur:
&#1044;&#1077;&#1084;&#1086;&#1085;&#1089;&#1090;&#1088;&#1072;&#1094;&#1080;&#1103;
&#1087;&#1088;&#1080;&#1084;&#1077;&#1085;&#1077;&#1085;&#1080;&#1103;
&#1087;&#1088;&#1086;&#1089;&#1090;&#1086;&#1075;&#1086;
&#1075;&#1088;&#1072;&#1092;&#1080;&#1095;&#1077;&#1089;&#1082;&#1086;&#1075;&#1086;
&#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;
&#1088;&#1072;&#1079;&#1084;&#1099;&#1090;&#1080;&#1103;:<!--mstheme--></font>
<pre>procedure TForm1.Blur;
var
  fl: array[-1..1, -1..1] of integer;
  bm: TBitmap;
  i, j, k, l: integer;
  r, g, b: integer;
  c: tcolor;
begin
  for k := -1 to 1 do
    for l := -1 to 1 do
      fl[k, l] := 1;
  fl[0, 0] := 4;
//&#1079;&#1072;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1077; &#1084;&#1072;&#1090;&#1088;&#1080;&#1094;&#1099; &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;
  bm := TBitmap.Create;
  bm.width := 200;
  bm.height := 200;
  bm.PixelFormat := pf32bit;
  QP.Attach(bm);
  for i := 0 to 9 do
  begin
    bm.Canvas.MoveTo(0, 10 + i * 20);
    bm.Canvas.LineTo(200, 10 + i * 20);
    bm.Canvas.MoveTo(10 + i * 20, 0);
    bm.Canvas.LineTo(10 + i * 20, 200);
  end;
//&#1088;&#1080;&#1089;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1089;&#1077;&#1090;&#1082;&#1080;
  canvas.Draw(0, 0, bm);
  for i := 1 to 198 do
    for j := 1 to 198 do
    begin
      r := 0;
      b := 0;
      g := 0;
      for k := -1 to 1 do
        for l := -1 to 1 do
        begin
          c := QP[i + k, j + l];
          inc(r, fl[k, l] * GetRValue(c));
          inc(g, fl[k, l] * GetGValue(c));
          inc(b, fl[k, l] * GetBValue(c));
        end;
//&#1087;&#1088;&#1080;&#1084;&#1077;&#1085;&#1077;&#1085;&#1080;&#1077; &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;  &#1082; &#1082;&#1072;&#1078;&#1076;&#1086;&#1081; &#1094;&#1074;&#1077;&#1090;&#1086;&#1074;&#1086;&#1081; &#1089;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1102;&#1097;&#1077;&#1081;
      QP[i, j]:=RGB(r div 12, g div 12, b div 12);
    end;
  canvas.Draw(0, 210, bm);
  bm.free;
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">Fly:
&#1044;&#1077;&#1084;&#1086;&#1085;&#1089;&#1090;&#1088;&#1072;&#1094;&#1080;&#1103;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;
QuickPixels &#1076;&#1083;&#1103;
&#1086;&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103;
&#1072;&#1092;&#1092;&#1080;&#1085;&#1085;&#1099;&#1093;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1081;
- &#1094;&#1077;&#1085;&#1090;&#1088;
&#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080;
&#1076;&#1074;&#1080;&#1078;&#1077;&#1090;&#1089;&#1103; &#1087;&#1086;
&#1089;&#1091;&#1078;&#1072;&#1102;&#1097;&#1077;&#1081;&#1089;&#1103;
&#1089;&#1087;&#1080;&#1088;&#1072;&#1083;&#1080;,
&#1088;&#1072;&#1079;&#1084;&#1077;&#1088;&#1099; &#1077;&#1077;
&#1091;&#1074;&#1077;&#1083;&#1080;&#1095;&#1080;&#1074;&#1072;&#1102;&#1090;&#1089;&#1103;
&#1076;&#1086; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1099;&#1093;,
&#1086;&#1085;&#1072;
&#1087;&#1086;&#1074;&#1086;&#1088;&#1072;&#1095;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;
&#1074;&#1086;&#1082;&#1088;&#1091;&#1075; &#1089;&#1074;&#1086;&#1077;&#1081;
&#1086;&#1089;&#1080;:<!--mstheme--></font>
<pre>procedure TForm1.FlyImage;
var
  k, x_new, y_new, x0, y0: integer;
  fac: double;
  cosphi, sinphi, x, y, dx, dy: integer;
const
  BinaryFactor = 10;

  function rnd(const x, y: Integer): TPoint;
  begin
    Result.X := x shr BinaryFactor;
    Result.Y := y shr BinaryFactor;
  end;
begin
  NewBmp.Assign(Bmp);
  QP.Attach(Bmp);
  QP2.Attach(NewBmp);
  w:=QP.Width;
  h:=QP.Height;
  x0 := w div 2;
  y0 := h div 2;
  for k := 1 to 1080 do
//1080=360*3 - 3 &#1087;&#1086;&#1083;&#1085;&#1099;&#1093; &#1086;&#1073;&#1086;&#1088;&#1086;&#1090;&#1072;
  begin
    fac := Sqr(1080 / k);
    dx := round(w * 512 * cos(k * Pi / 400) * (1 - fac));
    dy := round(w * 512 * sin(k * Pi / 400) * (1 - fac));
//&#1082;&#1086;&#1086;&#1088;&#1076;&#1080;&#1085;&#1072;&#1090;&#1099; &#1094;&#1077;&#1085;&#1090;&#1088;&#1072;
    cosphi := round(fac * cos(k * Pi / 180) * (2 shl (BinaryFactor - 1)));
    sinphi := round(fac * sin(k * Pi / 180) * (2 shl (BinaryFactor - 1)));
    for x_new := 0 to w - 1 do
    begin
      y := ((-x_new + x0) * sinphi - y0 * cosphi) + (y0 shl BinaryFactor) + dx;
      x := ((-x0 + x_new) * cosphi - y0 * sinphi) + (x0 shl BinaryFactor) + dy;
//&#1072;&#1092;&#1092;&#1080;&#1085;&#1085;&#1086;&#1077; &#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; - &#1076;&#1083;&#1103; &#1082;&#1072;&#1078;&#1076;&#1086;&#1081; &#1090;&#1086;&#1095;&#1082;&#1080; &#1085;&#1086;&#1074;&#1086;&#1081; &#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080; &#1088;&#1072;&#1089;&#1089;&#1095;&#1080;&#1090;&#1099;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103; &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1102;&#1097;&#1072;&#1103; &#1077;&#1081; &#1090;&#1086;&#1095;&#1082;&#1072; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1086;&#1081;
//&#1086;&#1089;&#1085;&#1086;&#1074;&#1085;&#1099;&#1077; &#1088;&#1072;&#1089;&#1095;&#1077;&#1090;&#1099; &#1076;&#1083;&#1103; &#1091;&#1089;&#1082;&#1086;&#1088;&#1077;&#1085;&#1080;&#1103; &#1087;&#1088;&#1086;&#1074;&#1086;&#1076;&#1103;&#1090;&#1089;&#1103; &#1074; &#1094;&#1077;&#1083;&#1099;&#1093; &#1095;&#1080;&#1089;&#1083;&#1072;&#1093;
      for y_new := 0 to h - 1 do
      begin
        with rnd(x, y) do
          if (x &gt;= 0) and (x &lt; w) and (y &gt;= 0) and (y &lt; h) then
            QP2.SetPixel(x_new, y_new, QP.getpixel(x, y))
          else
            QP2.SetPixel(x_new, y_new, clSilver);
        inc(y, cosphi);
        inc(x, sinphi);
      end;
    end;
    BitBlt(Canvas.Handle, 0, 0, w, h, NewBmp.canvas.handle, 0, 0, srccopy);
  end;
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">Blend:
&#1044;&#1077;&#1084;&#1086;&#1085;&#1089;&#1090;&#1088;&#1072;&#1094;&#1080;&#1103;
&#1085;&#1072;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;
&#1084;&#1072;&#1089;&#1082;&#1080; &#1089;
&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1086;&#1081;
&#1087;&#1088;&#1080; &#1076;&#1074;&#1080;&#1078;&#1077;&#1085;&#1080;&#1080;
&#1084;&#1099;&#1096;&#1080;
&#1087;&#1088;&#1086;&#1079;&#1088;&#1072;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100;&#1102;:<!--mstheme--></font>
<pre>for xi := 0 to w - 1 do
          for yi := 0 to h - 1 do
          begin
            ifi := Trunc(2 * (Hypot(x - xi, y - yi)));
            if ifi &gt; 255 then
              ifi := 255;
//&#1087;&#1088;&#1086;&#1079;&#1088;&#1072;&#1095;&#1085;&#1086;&#1089;&#1090;&#1100; &#1074; &#1090;&#1086;&#1095;&#1082;&#1077; 0..255
            c := QP.getpixel(xi, yi);
            r := getRValue(c);
            g := getGValue(c);
            b := getBValue(c);
            r := (r * (255 - ifi) + 128 * ifi) shr 8;
            g := (g * (255 - ifi) + 128 * ifi) shr 8;
            b := (b * (255 - ifi) + 128 * ifi) shr 8;
            c := RGB(r, g, b);
//&#1082;&#1086;&#1084;&#1073;&#1080;&#1085;&#1072;&#1094;&#1080;&#1103; &#1089;&#1077;&#1088;&#1086;&#1075;&#1086; &#1094;&#1074;&#1077;&#1090;&#1072; &#1080; &#1094;&#1074;&#1077;&#1090;&#1072; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1072;
            QP2.SetPixel(xi, yi, c);
          end;
        BitBlt(Canvas.Handle, 0, 0, w - 1, h - 1, NewBmp.Canvas.Handle, 0, 0,
          srccopy);</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">Dragging:
&#1044;&#1077;&#1084;&#1086;&#1085;&#1089;&#1090;&#1088;&#1072;&#1094;&#1080;&#1103;
&#1087;&#1077;&#1088;&#1077;&#1090;&#1072;&#1089;&#1082;&#1080;&#1074;&#1072;&#1085;&#1080;&#1103;
&#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080; &#1089;
&#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1084;&#1099;&#1096;&#1080;,
&#1087;&#1088;&#1080;&#1095;&#1077;&#1084;
&#1089;&#1082;&#1086;&#1088;&#1086;&#1089;&#1090;&#1100;
&#1087;&#1086;&#1087;&#1080;&#1082;&#1089;&#1077;&#1083;&#1100;&#1085;&#1086;&#1075;&#1086;
&#1082;&#1086;&#1087;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;
&#1089;&#1088;&#1072;&#1074;&#1085;&#1080;&#1084;&#1072; &#1089;
&#1082;&#1086;&#1087;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084;
&#1092;&#1088;&#1072;&#1075;&#1084;&#1077;&#1085;&#1090;&#1086;&#1074;
&#1087;&#1088;&#1103;&#1084;&#1086;&#1091;&#1075;&#1086;&#1083;&#1100;&#1085;&#1080;&#1082;&#1086;&#1074;
&#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; BitBlt
&#1080;&#1083;&#1080; CopyRect:<!--mstheme--></font>
<pre>xx := x0 + w - x;
        yy := y0 + h - y;
//&#1089;&#1076;&#1074;&#1080;&#1075; &#1086;&#1090;&#1085;&#1086;&#1089;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1087;&#1086;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;. w &#1080; h &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; &#1074;&#1086; &#1080;&#1079;&#1073;&#1077;&#1078;&#1072;&#1085;&#1080;&#1077; &#1087;&#1088;&#1086;&#1073;&#1083;&#1077;&#1084; &#1089; &#1086;&#1090;&#1088;&#1080;&#1094;. &#1095;&#1080;&#1089;&#1083;&#1072;&#1084;&#1080;
        for xi := 0 to w - 1 do
          for yi := 0 to h - 1 do
            QP2.SetPixel(xi, yi, QP.GetPixel((xi + xx) mod w, (yi + yy) mod h));
        BitBlt(Canvas.Handle, 0, 0, w - 1, h - 1, NewBmp.Canvas.Handle, 0, 0,
          srccopy);</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">Rubber:
&#1044;&#1077;&#1084;&#1086;&#1085;&#1089;&#1090;&#1088;&#1072;&#1094;&#1080;&#1103;
&#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080;
&#1085;&#1077;&#1072;&#1092;&#1092;&#1080;&#1085;&#1085;&#1086;&#1075;&#1086;
&#1087;&#1088;&#1077;&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;,
&#1085;&#1072;&#1087;&#1086;&#1084;&#1080;&#1085;&#1072;&#1102;&#1097;&#1077;&#1075;&#1086;
&#1088;&#1077;&#1079;&#1080;&#1085;&#1086;&#1074;&#1091;&#1102;
&#1087;&#1086;&#1074;&#1077;&#1088;&#1093;&#1085;&#1086;&#1089;&#1090;&#1100;
&#1089;
&#1079;&#1072;&#1082;&#1088;&#1077;&#1087;&#1083;&#1077;&#1085;&#1085;&#1099;&#1084;&#1080;
&#1082;&#1088;&#1072;&#1103;&#1084;&#1080;. &#1042;&#1074;&#1080;&#1076;&#1091;
&#1087;&#1088;&#1080;&#1084;&#1080;&#1090;&#1080;&#1074;&#1085;&#1086;&#1089;&#1090;&#1080;
&#1072;&#1083;&#1075;&#1086;&#1088;&#1080;&#1090;&#1084;&#1072;
&#1087;&#1088;&#1080;
&#1080;&#1089;&#1082;&#1072;&#1078;&#1077;&#1085;&#1080;&#1080;
&#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080;
&#1084;&#1086;&#1075;&#1091;&#1090;
&#1085;&#1072;&#1073;&#1083;&#1102;&#1076;&#1072;&#1090;&#1100;&#1089;&#1103;
&#1085;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077;
&#1072;&#1088;&#1090;&#1077;&#1092;&#1072;&#1082;&#1090;&#1099;.
&#1044;&#1083;&#1103; &#1082;&#1072;&#1078;&#1076;&#1086;&#1081;
&#1090;&#1086;&#1095;&#1082;&#1080;
&#1080;&#1089;&#1082;&#1072;&#1078;&#1077;&#1085;&#1085;&#1086;&#1081;
&#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080;
&#1087;&#1088;&#1086;&#1080;&#1079;&#1074;&#1086;&#1076;&#1080;&#1090;&#1089;&#1103;
&#1088;&#1072;&#1089;&#1095;&#1077;&#1090;
&#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1102;&#1097;&#1077;&#1081;
&#1077;&#1081; &#1090;&#1086;&#1095;&#1082;&#1080;
&#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1086;&#1075;&#1086;
&#1086;&#1073;&#1088;&#1072;&#1079;&#1072; &#1090;&#1072;&#1082;&#1080;&#1084;
&#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1084;: &#1076;&#1083;&#1103;
&#1085;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1087;&#1086;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;
&#1084;&#1099;&#1096;&#1080; X (&#1090;&#1086;&#1095;&#1082;&#1072;,
&#1079;&#1072; &#1082;&#1086;&#1090;&#1086;&#1088;&#1091;&#1102; &quot;&#1090;&#1103;&#1085;&#1091;&#1090;&quot;)
&#1080; &#1082;&#1072;&#1078;&#1076;&#1086;&#1081;
&#1090;&#1086;&#1095;&#1082;&#1080; Xi
&#1085;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1072;
&#1085;&#1072;&#1093;&#1086;&#1076;&#1080;&#1090;&#1089;&#1103;
&#1082;&#1088;&#1072;&#1077;&#1074;&#1072;&#1103;
&#1090;&#1086;&#1095;&#1082;&#1072;
&#1087;&#1088;&#1080;&#1074;&#1103;&#1079;&#1082;&#1080; Xb,
&#1083;&#1077;&#1078;&#1072;&#1097;&#1072;&#1103; &#1085;&#1072;
&#1083;&#1091;&#1095;&#1077; X-Xi &#1080;
&#1082;&#1086;&#1101;&#1092;&#1092;&#1080;&#1094;&#1080;&#1077;&#1085;&#1090; -
&#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1077;
&#1082;&#1086;&#1086;&#1088;&#1076;&#1080;&#1085;&#1072;&#1090;&#1099;
&#1090;&#1086;&#1095;&#1082;&#1080; Xi &#1085;&#1072;
&#1086;&#1090;&#1088;&#1077;&#1079;&#1082;&#1077; X-Xb,
&#1079;&#1072;&#1090;&#1077;&#1084; &#1087;&#1086; &#1101;&#1090;&#1086;&#1081;
&#1082;&#1088;&#1072;&#1077;&#1074;&#1086;&#1081;
&#1090;&#1086;&#1095;&#1082;&#1077; &#1080;
&#1085;&#1072;&#1095;&#1072;&#1083;&#1100;&#1085;&#1086;&#1084;&#1091;
&#1087;&#1086;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1102;
&#1084;&#1099;&#1096;&#1080; &#1074; &#1084;&#1086;&#1084;&#1077;&#1085;&#1090;
&#1085;&#1072;&#1078;&#1072;&#1090;&#1080;&#1103; (&quot;&#1079;&#1072;&#1093;&#1074;&#1072;&#1090;&#1072;&quot;)
&#1083;&#1080;&#1085;&#1077;&#1081;&#1085;&#1086;&#1081;
&#1080;&#1085;&#1090;&#1077;&#1088;&#1087;&#1086;&#1083;&#1103;&#1094;&#1080;&#1077;&#1081;
&#1085;&#1072;&#1093;&#1086;&#1076;&#1080;&#1084;
&#1082;&#1086;&#1086;&#1088;&#1076;&#1080;&#1085;&#1072;&#1090;&#1099;
&#1090;&#1086;&#1095;&#1082;&#1080; &#1074;
&#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1086;&#1084;
&#1088;&#1072;&#1089;&#1090;&#1088;&#1077;:<!--mstheme--></font>
<pre>procedure CalcXY(xi, yi, x, y, x0, y0, w1, h1: Integer; var xx, yy: Integer);
  var
    xb, yb, cf: double;
  begin
    {quasirubber surface
    x0 - old mouse coord
    x-   current
    xi -  new point
    xx -   old point (calculated from xi)
    xb -  sticking border point
    -----------------
    |                |
    |    x0        x |
    |                |
    |         xi     |
    |  xx            |
    |                |
    --xb-------------    }
    cf := y * xi - yi * x;
    if (xi &lt; x) then
    begin
      xb := 0;
      yb := cf / (xi - x);
      if yb &lt; 0 then
      begin
        xb := cf / (y - yi);
        yb := 0;
      end;
      if yb &gt; h1 then
      begin
        xb := (h1 * (xi - x) - cf) / (yi - y);
        yb := h1;
      end;
    end
    else
    begin
      xb := w1;
      yb := (cf + w1 * (yi - y)) / (xi - x);
      if yb &lt; 0 then
      begin
        xb := cf / (y - yi);
        yb := 0;
      end;
      if yb &gt; h1 then
      begin
        xb := (h1 * (xi - x) - cf) / (yi - y);
        yb := h1;
      end;
    end;

    if xb &lt;&gt; x then
      xx := trunc(xb + (x0 - xb) * (xi - xb) / (x - xb));
    if yb &lt;&gt; y then
      yy := trunc(yb + (y0 - yb) * (yi - yb) / (y - yb));
  end;
...
    if (ssLeft in Shift) and PtInRect(rct, point(x, y)) then
      begin
        for xi := 0 to w - 1 do
          for yi := 0 to h - 1 do
          begin
            CalcXY(xi, yi, x - Ord(xi = x), y, x0, y0, w, h, xx, yy);
            if (xx &gt;= 0) and (yy &gt;= 0) and (xx &lt; w) and (yy &lt; h) then
            begin
              c := QP.GetPixel(xx, yy);
              QP2.SetPixel(xi, yi, c);
            end;
          end;
        BitBlt(Canvas.Handle, 0, 0, w - 1, h - 1, NewBmp.Canvas.Handle, 0, 0, srccopy);
      end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica">&#1052;&#1086;&#1078;&#1085;&#1086;
&#1079;&#1072;&#1075;&#1088;&#1091;&#1079;&#1080;&#1090;&#1100; &#1080;
&#1089;&#1074;&#1086;&#1102;
&#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1091; &#1074;
&#1092;&#1086;&#1088;&#1084;&#1072;&#1090;&#1077; JPG &#1080;&#1083;&#1080; BMP
&#1080; &#1085;&#1077;&#1084;&#1085;&#1086;&#1075;&#1086;
&#1087;&#1086;&#1079;&#1072;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100;&#1089;&#1103;
&#1085;&#1072;&#1076;
&#1092;&#1086;&#1090;&#1086;&#1075;&#1088;&#1072;&#1092;&#1080;&#1077;&#1081;
&#1089;&#1074;&#1086;&#1077;&#1081; &#1080;&#1083;&#1080;
&#1073;&#1086;&#1089;&#1089;&#1072; ;). &#1055;&#1088;&#1080;
&#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1077;
&#1092;&#1083;&#1072;&#1078;&#1082;&#1072; &quot;KeepChanges&quot;
&#1087;&#1086;&#1089;&#1083;&#1077;
&#1086;&#1090;&#1087;&#1091;&#1089;&#1082;&#1072;&#1085;&#1080;&#1103;
&#1082;&#1085;&#1086;&#1087;&#1082;&#1080; &#1084;&#1099;&#1096;&#1080;
&#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1072;&#1103;
&#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1072;
&#1079;&#1072;&#1084;&#1077;&#1085;&#1103;&#1077;&#1090;&#1089;&#1103;
&#1080;&#1089;&#1082;&#1072;&#1078;&#1077;&#1085;&#1085;&#1086;&#1081;.
&#1055;&#1088;&#1080; &#1078;&#1077;&#1083;&#1072;&#1085;&#1080;&#1080;
&#1084;&#1086;&#1078;&#1085;&#1086; &#1080;
&#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1080;&#1090;&#1100;
&#1087;&#1083;&#1086;&#1076;&#1099; &#1089;&#1074;&#1086;&#1077;&#1075;&#1086;
&#1090;&#1074;&#1086;&#1088;&#1095;&#1077;&#1089;&#1090;&#1074;&#1072;.<!--mstheme--></font>
<pre>procedure TForm1.LoadPicture;
var
  JP: TJpegImage;
  Bm: TBitmap;
  ScaleX, ScaleY: Double;
  NewX, NewY: Integer;
begin
  JP := TJpegImage.Create;
  Bm := TBitmap.Create;
  try
    if UpperCase(ExtractFileExt(OpenPictureDialog1.FileName))='.BMP' then
      BM.LoadFromFile(OpenPictureDialog1.FileName)
    else begin
      JP.LoadFromFile(OpenPictureDialog1.FileName);
      Bm.Assign(JP);
    end;
    ScaleX := Bm.Width / 400;
    ScaleY := Bm.Height / 400;
    if ScaleX &gt; ScaleY then
      if ScaleX &gt; 1 then
      begin
//&#1084;&#1072;&#1089;&#1096;&#1090;&#1072;&#1073;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;
        NewX := 400;
        NewY := Round(Bm.Height / ScaleX);
        Bmp.Width := NewX;
        Bmp.Height := NewY;
        SetStretchBltMode(Bmp.Canvas.Handle, HALFTONE);
//&#1050;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;&#1077; &#1089;&#1078;&#1072;&#1090;&#1080;&#1077; &#1089;&#1088;&#1072;&#1073;&#1072;&#1090;&#1099;&#1074;&#1072;&#1077;&#1090; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1074; &#1054;&#1057; NT-&#1089;&#1077;&#1084;&#1077;&#1081;&#1089;&#1090;&#1074;&#1072;. &#1042; Win9X &#1084;&#1072;&#1089;&#1096;&#1090;&#1072;&#1073;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090; &#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1103;&#1090;&#1100;&#1089;&#1103; &#1089; &#1086;&#1075;&#1088;&#1077;&#1093;&#1072;&#1084;&#1080;,
//&#1085;&#1086; &#1077;&#1075;&#1086; &#1084;&#1086;&#1078;&#1085;&#1086; &#1073;&#1077;&#1079; &#1090;&#1088;&#1091;&#1076;&#1072; &#1089;&#1076;&#1077;&#1083;&#1072;&#1090;&#1100; &#1080; &#1089; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084; TQuickPixels &#1089;&#1086; &#1089;&#1075;&#1083;&#1072;&#1078;&#1080;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084; &#1080;&#1083;&#1080; &#1080;&#1085;&#1090;&#1077;&#1088;&#1087;&#1086;&#1083;&#1103;&#1094;&#1080;&#1077;&#1081;
        StretchBlt(Bmp.Canvas.Handle, 0, 0, NewX, NewY,
          Bm.Canvas.Handle, 0, 0, Bm.Width, Bm.Height, SrcCopy);
      end
      else
        Bmp.Assign(Bm)
    else if ScaleY &gt; 1 then
    ...
  finally
    JP.Free;
    Bm.Free;
    Effect:=0;
  end;
end;</pre>
<!--mstheme--><font face="Arial, Arial, Helvetica"><center>
&#1041;&#1086;&#1088;&#1080;&#1089;
&#1053;&#1086;&#1074;&#1075;&#1086;&#1088;&#1086;&#1076;&#1086;&#1074;,
&#1040;&#1083;&#1077;&#1082;&#1089;&#1077;&#1081;
&#1056;&#1072;&#1076;&#1080;&#1086;&#1085;&#1086;&#1074;. 2003 &#1075;.</center><!--mstheme--></font>

</body>

</html>
